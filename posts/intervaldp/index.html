<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’ - Doã”ã¿ç®±ğŸª„</title><meta name=Description content="Doã”ã¿ç®±2.1"><meta property="og:url" content="http://dodolalorc.cn/posts/intervaldp/">
<meta property="og:site_name" content="Doã”ã¿ç®±ğŸª„"><meta property="og:title" content="åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’"><meta property="og:description" content="åŒºé—´åŠ¨æ€è§„åˆ’ä¸€èˆ¬ä»¥åŒºé—´ä½œä¸ºåŠ¨æ€è§„åˆ’çš„é˜¶æ®µã€‚
[P1880]çŸ³å­åˆå¹¶ é¢˜ç›®æè¿°åœ¨ä¸€ä¸ªåœ†å½¢æ“åœºçš„å››å‘¨æ‘†æ”¾ $N$ å †çŸ³å­ï¼Œç°è¦å°†çŸ³å­æœ‰æ¬¡åºåœ°åˆå¹¶æˆä¸€å †ï¼Œè§„å®šæ¯æ¬¡åªèƒ½é€‰ç›¸é‚»çš„ $2$ å †åˆå¹¶æˆæ–°çš„ä¸€å †ï¼Œå¹¶å°†æ–°çš„ä¸€å †çš„çŸ³å­æ•°ï¼Œè®°ä¸ºè¯¥æ¬¡åˆå¹¶çš„å¾—åˆ†ã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-11T21:50:26+08:00"><meta property="article:modified_time" content="2025-03-02T13:50:38+00:00"><meta property="article:tag" content="ç®—æ³•"><meta property="article:tag" content="DP"><meta property="og:image" content="http://dodolalorc.cn/img/dodola.png"><meta property="og:see_also" content="http://dodolalorc.cn/posts/nc25wd4/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/nc25wd3/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/nc25wd2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/nc25wd1/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/cfround990div2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/cfround980div2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/23hangzhouicpc/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://dodolalorc.cn/img/dodola.png"><meta name=twitter:title content="åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’"><meta name=twitter:description content="åŒºé—´åŠ¨æ€è§„åˆ’ä¸€èˆ¬ä»¥åŒºé—´ä½œä¸ºåŠ¨æ€è§„åˆ’çš„é˜¶æ®µã€‚
[P1880]çŸ³å­åˆå¹¶ é¢˜ç›®æè¿°åœ¨ä¸€ä¸ªåœ†å½¢æ“åœºçš„å››å‘¨æ‘†æ”¾ $N$ å †çŸ³å­ï¼Œç°è¦å°†çŸ³å­æœ‰æ¬¡åºåœ°åˆå¹¶æˆä¸€å †ï¼Œè§„å®šæ¯æ¬¡åªèƒ½é€‰ç›¸é‚»çš„ $2$ å †åˆå¹¶æˆæ–°çš„ä¸€å †ï¼Œå¹¶å°†æ–°çš„ä¸€å †çš„çŸ³å­æ•°ï¼Œè®°ä¸ºè¯¥æ¬¡åˆå¹¶çš„å¾—åˆ†ã€‚"><meta name=application-name content="Doã”ã¿ç®±-ä¸€åªå°èœé¸¡çš„Blog"><meta name=apple-mobile-web-app-title content="Doã”ã¿ç®±-ä¸€åªå°èœé¸¡çš„Blog"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/logo.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://dodolalorc.cn/posts/intervaldp/><link rel=prev href=http://dodolalorc.cn/posts/segtree_practice/><link rel=next href=http://dodolalorc.cn/posts/cfround977div2/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script defer src=https://cloud.umami.is/script.js data-website-id=6137bed0-27b6-493f-8fb1-3f054e6795b7></script><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Medium/result.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/dodolalorc.cn\/posts\/intervaldp\/"},"genre":"posts","keywords":"ç®—æ³•, DP","wordcount":4996,"url":"http:\/\/dodolalorc.cn\/posts\/intervaldp\/","datePublished":"2024-09-11T21:50:26+08:00","dateModified":"2025-03-02T13:50:38+00:00","license":"dodola","publisher":{"@type":"Organization","name":"DODOLA","logo":"http:\/\/dodolalorc.cn\/images\/miku.jpg"},"author":{"@type":"Person","name":"DODOLA"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Doã”ã¿ç®±ğŸª„><span class=header-title-pre>ğŸ—‘ï¸</span>Doã”ã¿ç®±2.1<span class=header-title-post>ğŸ¾</span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts>ğŸ™ æ–‡ç«  </a><a class=menu-item href=/series/>ğŸŒ  ç³»åˆ— </a><a class=menu-item href=/categories/>ğŸ“‚ åˆ†ç±» </a><a class=menu-item href=/tags/>ğŸ·ï¸ æ ‡ç­¾ </a><a class=menu-item href=/links/>ğŸ§¸ å‹é“¾ </a><a class=menu-item href=/about/>ğŸ… å…³äº </a><a class=menu-item href=/comments/><i class="fa-solid fa-comment" style=color:#63e6be></i> ç•™è¨€ </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="æœç´¢æœ¬ç«™å†…å®¹( â€¢Ì€ Ï‰ â€¢Ì )y" id=search-input-desktop>
<a href=# class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fas fa-search fa-fw"></i>
</a><a href=# class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=# class="menu-item theme-select" title><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title><option value=light>æµ…è‰²</option><option value=dark>æ·±è‰²</option><option value=black>é»‘è‰²</option><option value=auto>è·Ÿéšç³»ç»Ÿ</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Doã”ã¿ç®±ğŸª„><span class=header-title-pre>ğŸ—‘ï¸</span>Doã”ã¿ç®±2.1<span class=header-title-post>ğŸ¾</span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="æœç´¢æœ¬ç«™å†…å®¹( â€¢Ì€ Ï‰ â€¢Ì )y" id=search-input-mobile>
<a href=# class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fas fa-search fa-fw"></i>
</a><a href=# class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></div><a class=menu-item href=/posts title>ğŸ™æ–‡ç« </a><a class=menu-item href=/series/ title>ğŸŒ ç³»åˆ—</a><a class=menu-item href=/categories/ title>ğŸ“‚åˆ†ç±»</a><a class=menu-item href=/tags/ title>ğŸ·ï¸æ ‡ç­¾</a><a class=menu-item href=/links/ title>ğŸ§¸å‹é“¾</a><a class=menu-item href=/about/ title>ğŸ…å…³äº</a><a class=menu-item href=/comments/ title><i class="fa-solid fa-comment" style=color:#63e6be></i>ç•™è¨€</a><a href=# class="menu-item theme-select" title>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title><option value=light>æµ…è‰²</option><option value=dark>æ·±è‰²</option><option value=black>é»‘è‰²</option><option value=auto>è·Ÿéšç³»ç»Ÿ</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>ç›®å½•</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#p1880çŸ³å­åˆå¹¶>[P1880]çŸ³å­åˆå¹¶</a><ul><li><a href=#é¢˜ç›®æè¿°>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯>æ€è·¯</a></li><li><a href=#ä»£ç >ä»£ç </a></li></ul></li><li><a href=#p3146248g>[P3146]248G</a><ul><li><a href=#é¢˜é¢ç¿»è¯‘>é¢˜é¢ç¿»è¯‘</a></li><li><a href=#é¢˜ç›®æè¿°-1>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-1>æ€è·¯</a></li><li><a href=#ä»£ç -1>ä»£ç </a></li></ul></li><li><a href=#noip2006-æé«˜ç»„-èƒ½é‡é¡¹é“¾>[NOIP2006 æé«˜ç»„] èƒ½é‡é¡¹é“¾</a><ul><li><a href=#é¢˜ç›®æè¿°-2>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-2>æ€è·¯</a></li><li><a href=#ä»£ç -2>ä»£ç </a></li></ul></li><li><a href=#noip2007-æé«˜ç»„-çŸ©é˜µå–æ•°æ¸¸æˆ>[NOIP2007 æé«˜ç»„] çŸ©é˜µå–æ•°æ¸¸æˆ</a><ul><li><a href=#é¢˜ç›®æè¿°-3>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-3>æ€è·¯</a></li><li><a href=#ä»£ç -3>ä»£ç </a></li></ul></li><li><a href=#cqoi2007-æ¶‚è‰²>[CQOI2007] æ¶‚è‰²</a><ul><li><a href=#é¢˜ç›®æè¿°-4>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-4>æ€è·¯</a></li><li><a href=#ä»£ç -4>ä»£ç </a></li></ul></li><li><a href=#scoi2003-å­—ç¬¦ä¸²æŠ˜å >[SCOI2003] å­—ç¬¦ä¸²æŠ˜å </a><ul><li><a href=#é¢˜ç›®æè¿°-5>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-5>æ€è·¯</a></li><li><a href=#ä»£ç -5>ä»£ç </a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’</h1><div class=post-meta><div class=post-meta-line><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://dodolalorc.cn/ title=Author target=_blank rel="noopener noreferrer author" class=author>DODOLA</a>
</span>&nbsp;<span class=post-category>æ”¶å½•äº </span>&nbsp;<span class=post-category>ç±»åˆ« <a href=/categories/%E5%9C%A8%E5%AD%A6%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%A5%E5%AD%90%E9%87%8C/><i class="far fa-folder fa-fw"></i>åœ¨å­¦ç®—æ³•çš„æ—¥å­é‡Œ</a></span>&nbsp;<span class=post-category>å’Œ</span>&nbsp;<span class=post-series>ç³»åˆ— <a href=/series/%E9%A2%98%E8%A7%A3%E8%AE%B0%E5%BD%95/><i class="far fa-list-alt fa-fw"></i>é¢˜è§£è®°å½•</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2024-09-11>2024-09-11</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2025-03-02>2025-03-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 4996 å­—&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 10 åˆ†é’Ÿ&nbsp;
<span id=busuanzi_container_value_page_pv><i class="far fa-eye fa-fw"></i>
<span id=busuanzi_value_page_pv></span>&nbsp;æ¬¡é˜…è¯»</span></div></div><div class=featured-image><img loading=eager src=https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png srcset="https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png, https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png 1.5x, https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png title=https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png height=auto width=auto></div><div class="details series-nav open"><div class="details-summary series-title"><span>ç³»åˆ— - é¢˜è§£è®°å½•</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content series-content"><nav><ul><li><a href=/posts/nc25wd4/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day4</a></li><li><a href=/posts/nc25wd3/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day3ï¼ˆå®Œçµï¼‰</a></li><li><a href=/posts/nc25wd2/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day2</a></li><li><a href=/posts/nc25wd1/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day1ï¼ˆå®Œçµï¼‰</a></li><li><a href=/posts/cfround990div2/>Codeforces Round 990 (Div. 2)</a></li><li><a href=/posts/cfround980div2/>Codeforces Round 980 (Div. 2)</a></li><li><a href=/posts/23hangzhouicpc/>2023æ­å·ICPCåŒºåŸŸèµ›</a></li><li><a href=/posts/cfround977div2/>Codeforces Round 977 (Div. 2, based on COMPFEST 16 - Final Round)</a></li><li><span class=active>åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’</span></li><li><a href=/posts/segtree_practice/>çº¿æ®µæ ‘ä¸“é¢˜ç»ƒä¹ </a></li><li><a href=/posts/nc24sd10/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day10||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd8/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day8||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd7/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day7||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd6/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day6||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd5/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day5||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd4/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day4||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd3/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day3||è¡¥é¢˜</a></li><li><a href=/posts/hdu24sd1/>2024æ­ç”µé’‰è€™ç¼–ç¨‹è”èµ›Day1||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd2/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day2||è¡¥é¢˜</a></li><li><a href=/posts/nc24sd1/>2024ç‰›å®¢æš‘å‡å¤šæ ¡è®­ç»ƒè¥Day1||è¡¥é¢˜</a></li><li><a href=/posts/24jilinccpc/>2024å‰æ—çœèµ›è¡¥é¢˜è®°å½•</a></li><li><a href=/posts/cfround930div2/>Codeforces Round 930(div2)</a></li><li><a href=/posts/cfround931div2/>Codeforces Round 931(div2)</a></li><li><a href=/posts/cfround932div2/>Codeforces Round 932(div2)</a></li><li><a href=/posts/cfround933div3/>Codeforces Round 933(div3)</a></li><li><a href=/posts/lineardp/>åˆ·é¢˜è®°å½•||çº¿æ€§åŠ¨æ€è§„åˆ’</a></li><li><a href=/posts/cfedu162div2/>Educational Codeforces Round 162(div2)</a></li><li><a href=/posts/cfround929div3/>Codeforces Round 929(div3)</a></li><li><a href=/posts/cfround927div3/>Codeforces Round 927(div3)</a></li><li><a href=/posts/nc24wd6/>2024ç‰›å®¢å¯’å‡è¥6||è¡¥é¢˜</a></li><li><a href=/posts/nc24wd4/>2024ç‰›å®¢å¯’å‡è¥4||è¡¥é¢˜</a></li><li><a href=/posts/nc24wd5/>2024ç‰›å®¢å¯’å‡è¥5||è¡¥é¢˜</a></li><li><a href=/posts/nc24wd3/>2024ç‰›å®¢å¯’å‡è¥3||è¡¥é¢˜</a></li><li><a href=/posts/nc24wd2/>2024ç‰›å®¢å¯’å‡è¥2||è¡¥é¢˜</a></li><li><a href=/posts/nc24wd1/>2024ç‰›å®¢å¯’å‡è¥1||è¡¥é¢˜</a></li><li><a href=/posts/nenuoj/>NENU2023å­¦å¹´ç®—æ³•2ä¾‹é¢˜</a></li></ul></nav></div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#p1880çŸ³å­åˆå¹¶>[P1880]çŸ³å­åˆå¹¶</a><ul><li><a href=#é¢˜ç›®æè¿°>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯>æ€è·¯</a></li><li><a href=#ä»£ç >ä»£ç </a></li></ul></li><li><a href=#p3146248g>[P3146]248G</a><ul><li><a href=#é¢˜é¢ç¿»è¯‘>é¢˜é¢ç¿»è¯‘</a></li><li><a href=#é¢˜ç›®æè¿°-1>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-1>æ€è·¯</a></li><li><a href=#ä»£ç -1>ä»£ç </a></li></ul></li><li><a href=#noip2006-æé«˜ç»„-èƒ½é‡é¡¹é“¾>[NOIP2006 æé«˜ç»„] èƒ½é‡é¡¹é“¾</a><ul><li><a href=#é¢˜ç›®æè¿°-2>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-2>æ€è·¯</a></li><li><a href=#ä»£ç -2>ä»£ç </a></li></ul></li><li><a href=#noip2007-æé«˜ç»„-çŸ©é˜µå–æ•°æ¸¸æˆ>[NOIP2007 æé«˜ç»„] çŸ©é˜µå–æ•°æ¸¸æˆ</a><ul><li><a href=#é¢˜ç›®æè¿°-3>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-3>æ€è·¯</a></li><li><a href=#ä»£ç -3>ä»£ç </a></li></ul></li><li><a href=#cqoi2007-æ¶‚è‰²>[CQOI2007] æ¶‚è‰²</a><ul><li><a href=#é¢˜ç›®æè¿°-4>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-4>æ€è·¯</a></li><li><a href=#ä»£ç -4>ä»£ç </a></li></ul></li><li><a href=#scoi2003-å­—ç¬¦ä¸²æŠ˜å >[SCOI2003] å­—ç¬¦ä¸²æŠ˜å </a><ul><li><a href=#é¢˜ç›®æè¿°-5>é¢˜ç›®æè¿°</a></li><li><a href=#æ€è·¯-5>æ€è·¯</a></li><li><a href=#ä»£ç -5>ä»£ç </a></li></ul></li></ul></nav></div></div><div class=content id=content><p><strong>åŒºé—´åŠ¨æ€è§„åˆ’ä¸€èˆ¬ä»¥åŒºé—´ä½œä¸ºåŠ¨æ€è§„åˆ’çš„é˜¶æ®µã€‚</strong></p><h2 id=p1880çŸ³å­åˆå¹¶ class=headerLink><a href=#p1880%e7%9f%b3%e5%ad%90%e5%90%88%e5%b9%b6 class=header-mark></a>[P1880]çŸ³å­åˆå¹¶</h2><h3 id=é¢˜ç›®æè¿° class=headerLink><a href=#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0 class=header-mark></a>é¢˜ç›®æè¿°</h3><p>åœ¨ä¸€ä¸ªåœ†å½¢æ“åœºçš„å››å‘¨æ‘†æ”¾ $N$ å †çŸ³å­ï¼Œç°è¦å°†çŸ³å­æœ‰æ¬¡åºåœ°åˆå¹¶æˆä¸€å †ï¼Œè§„å®šæ¯æ¬¡åªèƒ½é€‰ç›¸é‚»çš„ $2$ å †åˆå¹¶æˆæ–°çš„ä¸€å †ï¼Œå¹¶å°†æ–°çš„ä¸€å †çš„çŸ³å­æ•°ï¼Œè®°ä¸ºè¯¥æ¬¡åˆå¹¶çš„å¾—åˆ†ã€‚</p><p>è¯•è®¾è®¡å‡ºä¸€ä¸ªç®—æ³•,è®¡ç®—å‡ºå°† $N$ å †çŸ³å­åˆå¹¶æˆ $1$ å †çš„æœ€å°å¾—åˆ†å’Œæœ€å¤§å¾—åˆ†ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>æ•°æ®çš„ç¬¬ $1$ è¡Œæ˜¯æ­£æ•´æ•° $N$ï¼Œè¡¨ç¤ºæœ‰ $N$ å †çŸ³å­ã€‚</p><p>ç¬¬ $2$ è¡Œæœ‰ $N$ ä¸ªæ•´æ•°ï¼Œç¬¬ $i$ ä¸ªæ•´æ•° $a_i$ è¡¨ç¤ºç¬¬ $i$ å †çŸ³å­çš„ä¸ªæ•°ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>è¾“å‡ºå…± $2$ è¡Œï¼Œç¬¬ $1$ è¡Œä¸ºæœ€å°å¾—åˆ†ï¼Œç¬¬ $2$ è¡Œä¸ºæœ€å¤§å¾—åˆ†ã€‚</p><p><strong>æ ·ä¾‹ #1</strong></p><p>æ ·ä¾‹è¾“å…¥ #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>4
</span></span><span class=line><span class=cl>4 5 9 4
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>43
</span></span><span class=line><span class=cl>54
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong></p><p>$1\leq N\leq 100$ï¼Œ$0\leq a_i\leq 20$â€‹ã€‚</p><h3 id=æ€è·¯ class=headerLink><a href=#%e6%80%9d%e8%b7%af class=header-mark></a>æ€è·¯</h3><p>è€ƒè™‘çŠ¶æ€è½¬ç§»ï¼š</p><p>æ¯æ¬¡åˆå¹¶åŒºé—´$[l,r]$æ—¶ï¼Œå¯ä»¥ç”±åŒºé—´$[l,k]$å’Œ$[k+1,r]$çš„çŠ¶æ€è½¬ç§»è¿‡æ¥ï¼Œè®°$f(i,j)$æ˜¯åˆå¹¶åŒºé—´$[i,j]$çš„æœ€å¤§å¾—åˆ†ï¼Œ$sum(i,j)$æ˜¯åˆå¹¶$[i,j]$çš„å¾—åˆ†ï¼Œåˆ™æœ‰ï¼š
$$
f(i,j)=max(f(i,j),f(i,k)+f(k+1,j)+sum(i,j))
$$
æ­¤é¢˜è€ƒè™‘åˆ°æ˜¯ç¯å½¢æ•°ç»„ï¼Œå¯ä»¥å°†æ•°ç»„å¤åˆ¶ä¸€å€ï¼Œæšä¸¾åŒºé—´é•¿åº¦æ˜¯$n$çš„æœ€ä¼˜å€¼ã€‚</p><h3 id=ä»£ç  class=headerLink><a href=#%e4%bb%a3%e7%a0%81 class=header-mark></a>ä»£ç </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>pii</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>250</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>mo109</span> <span class=o>=</span> <span class=mi>1000000007</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>a</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>f1</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>],</span> <span class=n>f2</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>pre</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=nf>sum</span><span class=p>(</span><span class=kt>int</span> <span class=n>l</span><span class=p>,</span> <span class=kt>int</span> <span class=n>r</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>pre</span><span class=p>[</span><span class=n>r</span><span class=p>]</span> <span class=o>-</span> <span class=n>pre</span><span class=p>[</span><span class=n>l</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>pre</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>pre</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>pre</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>pre</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>n</span><span class=p>]</span> <span class=o>+</span> <span class=n>pre</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f2</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>len</span> <span class=o>+</span> <span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span><span class=n>k</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>])</span><span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f1</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>sum</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span> <span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f1</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>sum</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=n>f2</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f2</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f2</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f2</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>sum</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>mx</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>mn</span> <span class=o>=</span> <span class=mf>1e18</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>mx</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>mx</span><span class=p>,</span> <span class=n>f2</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=n>mn</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>mn</span><span class=p>,</span> <span class=n>f1</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>mn</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span> <span class=o>&lt;&lt;</span> <span class=n>mx</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=p3146248g class=headerLink><a href=#p3146248g class=header-mark></a>[P3146]248G</h2><h3 id=é¢˜é¢ç¿»è¯‘ class=headerLink><a href=#%e9%a2%98%e9%9d%a2%e7%bf%bb%e8%af%91 class=header-mark></a>é¢˜é¢ç¿»è¯‘</h3><p>ç»™å®šä¸€ä¸ª $1\ \times n$ çš„åœ°å›¾ï¼Œåœ¨é‡Œé¢ç© $2048$ï¼Œæ¯æ¬¡å¯ä»¥åˆå¹¶ç›¸é‚»ä¸¤ä¸ªï¼ˆæ•°å€¼èŒƒå›´ $1\sim 40$ï¼‰ï¼Œé—®åºåˆ—ä¸­å‡ºç°çš„æœ€å¤§æ•°å­—çš„å€¼æœ€å¤§æ˜¯å¤šå°‘ã€‚æ³¨æ„åˆå¹¶åçš„æ•°å€¼å¹¶éåŠ å€è€Œæ˜¯ $+1$ï¼Œä¾‹å¦‚ $2$ ä¸ $2$ åˆå¹¶åçš„æ•°å€¼ä¸º $3$ã€‚</p><h3 id=é¢˜ç›®æè¿°-1 class=headerLink><a href=#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0-1 class=header-mark></a>é¢˜ç›®æè¿°</h3><p>Bessie likes downloading games to play on her cell phone, even though she doesfind the small touch screen rather cumbersome to use with her large hooves.</p><p>She is particularly intrigued by the current game she is playing.The game starts with a sequence of $N$ positive integers ($2 \leq N\leq 248$), each in the range $1 \ldots 40$. In one move, Bessie cantake two adjacent numbers with equal values and replace them a singlenumber of value one greater (e.g., she might replace two adjacent 7swith an 8). The goal is to maximize the value of the largest numberpresent in the sequence at the end of the game. Please help Bessiescore as highly as possible!</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>The first line of input contains $N$, and the next $N$ lines give the sequence</p><p>of $N$ numbers at the start of the game.</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>Please output the largest integer Bessie can generate.</p><p><strong>æ ·ä¾‹ #1</strong></p><p>æ ·ä¾‹è¾“å…¥ #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>4
</span></span><span class=line><span class=cl>1
</span></span><span class=line><span class=cl>1
</span></span><span class=line><span class=cl>1
</span></span><span class=line><span class=cl>2
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>3
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong></p><p>In this example shown here, Bessie first merges the second and third 1s to</p><p>obtain the sequence 1 2 2, and then she merges the 2s into a 3. Note that it is</p><p>not optimal to join the first two 1s.</p><h3 id=æ€è·¯-1 class=headerLink><a href=#%e6%80%9d%e8%b7%af-1 class=header-mark></a>æ€è·¯</h3><p>åŒºé—´dpï¼Œè€ƒè™‘è½¬ç§»ï¼š
$$
f(i,j)=f(i,k)+1\quad when:f(i,k)=f(k+1,j)
$$
åŒæ—¶è¦ä¿è¯$f(i,k)$å’Œ$f(k+1,j)$åœ¨å‘$f(i,j)$è½¬ç§»ä¹‹å‰ï¼Œå·²ç»è¿›è¡Œäº†"åˆå¹¶"ã€‚</p><h3 id=ä»£ç -1 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-1 class=header-mark></a>ä»£ç </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>pii</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>550</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>mo109</span> <span class=o>=</span> <span class=mi>1000000007</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>a</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>j</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>==</span> <span class=n>f</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>&amp;&amp;</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>ans</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>ans</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>ans</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>ans</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=noip2006-æé«˜ç»„-èƒ½é‡é¡¹é“¾ class=headerLink><a href=#noip2006-%e6%8f%90%e9%ab%98%e7%bb%84-%e8%83%bd%e9%87%8f%e9%a1%b9%e9%93%be class=header-mark></a>[NOIP2006 æé«˜ç»„] èƒ½é‡é¡¹é“¾</h2><h3 id=é¢˜ç›®æè¿°-2 class=headerLink><a href=#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0-2 class=header-mark></a>é¢˜ç›®æè¿°</h3><p>åœ¨ Mars æ˜Ÿçƒä¸Šï¼Œæ¯ä¸ª Mars äººéƒ½éšèº«ä½©å¸¦ç€ä¸€ä¸²èƒ½é‡é¡¹é“¾ã€‚åœ¨é¡¹é“¾ä¸Šæœ‰ $N$ é¢—èƒ½é‡ç ã€‚èƒ½é‡ç æ˜¯ä¸€é¢—æœ‰å¤´æ ‡è®°ä¸å°¾æ ‡è®°çš„ç å­ï¼Œè¿™äº›æ ‡è®°å¯¹åº”ç€æŸä¸ªæ­£æ•´æ•°ã€‚å¹¶ä¸”ï¼Œå¯¹äºç›¸é‚»çš„ä¸¤é¢—ç å­ï¼Œå‰ä¸€é¢—ç å­çš„å°¾æ ‡è®°ä¸€å®šç­‰äºåä¸€é¢—ç å­çš„å¤´æ ‡è®°ã€‚å› ä¸ºåªæœ‰è¿™æ ·ï¼Œé€šè¿‡å¸ç›˜ï¼ˆå¸ç›˜æ˜¯ Mars äººå¸æ”¶èƒ½é‡çš„ä¸€ç§å™¨å®˜ï¼‰çš„ä½œç”¨ï¼Œè¿™ä¸¤é¢—ç å­æ‰èƒ½èšåˆæˆä¸€é¢—ç å­ï¼ŒåŒæ—¶é‡Šæ”¾å‡ºå¯ä»¥è¢«å¸ç›˜å¸æ”¶çš„èƒ½é‡ã€‚å¦‚æœå‰ä¸€é¢—èƒ½é‡ç çš„å¤´æ ‡è®°ä¸º $m$ï¼Œå°¾æ ‡è®°ä¸º $r$ï¼Œåä¸€é¢—èƒ½é‡ç çš„å¤´æ ‡è®°ä¸º $r$ï¼Œå°¾æ ‡è®°ä¸º $n$ï¼Œåˆ™èšåˆåé‡Šæ”¾çš„èƒ½é‡ä¸º $m \times r \times n$ï¼ˆMars å•ä½ï¼‰ï¼Œæ–°äº§ç”Ÿçš„ç å­çš„å¤´æ ‡è®°ä¸º $m$ï¼Œå°¾æ ‡è®°ä¸º $n$ã€‚</p><p>éœ€è¦æ—¶ï¼ŒMars äººå°±ç”¨å¸ç›˜å¤¹ä½ç›¸é‚»çš„ä¸¤é¢—ç å­ï¼Œé€šè¿‡èšåˆå¾—åˆ°èƒ½é‡ï¼Œç›´åˆ°é¡¹é“¾ä¸Šåªå‰©ä¸‹ä¸€é¢—ç å­ä¸ºæ­¢ã€‚æ˜¾ç„¶ï¼Œä¸åŒçš„èšåˆé¡ºåºå¾—åˆ°çš„æ€»èƒ½é‡æ˜¯ä¸åŒçš„ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªèšåˆé¡ºåºï¼Œä½¿ä¸€ä¸²é¡¹é“¾é‡Šæ”¾å‡ºçš„æ€»èƒ½é‡æœ€å¤§ã€‚</p><p>ä¾‹å¦‚ï¼šè®¾ $N=4$ï¼Œ$4$ é¢—ç å­çš„å¤´æ ‡è®°ä¸å°¾æ ‡è®°ä¾æ¬¡ä¸º $(2,3)(3,5)(5,10)(10,2)$ã€‚æˆ‘ä»¬ç”¨è®°å· $\oplus$ è¡¨ç¤ºä¸¤é¢—ç å­çš„èšåˆæ“ä½œï¼Œ$(j \oplus k)$ è¡¨ç¤ºç¬¬ $j,k$ ä¸¤é¢—ç å­èšåˆåæ‰€é‡Šæ”¾çš„èƒ½é‡ã€‚åˆ™ç¬¬ $4$ï¼Œ$1$ ä¸¤é¢—ç å­èšåˆåé‡Šæ”¾çš„èƒ½é‡ä¸ºï¼š</p><p>$(4 \oplus 1)=10 \times 2 \times 3=60$ã€‚</p><p>è¿™ä¸€ä¸²é¡¹é“¾å¯ä»¥å¾—åˆ°æœ€ä¼˜å€¼çš„ä¸€ä¸ªèšåˆé¡ºåºæ‰€é‡Šæ”¾çš„æ€»èƒ½é‡ä¸ºï¼š</p><p>$(((4 \oplus 1) \oplus 2) \oplus 3)=10 \times 2 \times 3+10 \times 3 \times 5+10 \times 5 \times 10=710$ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•° $N$ï¼ˆ$4 \le N \le 100$ï¼‰ï¼Œè¡¨ç¤ºé¡¹é“¾ä¸Šç å­çš„ä¸ªæ•°ã€‚ç¬¬äºŒè¡Œæ˜¯ $N$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•°ï¼Œæ‰€æœ‰çš„æ•°å‡ä¸è¶…è¿‡ $1000$ã€‚ç¬¬ $i$ ä¸ªæ•°ä¸ºç¬¬ $i$ é¢—ç å­çš„å¤´æ ‡è®°ï¼ˆ$1 \le i \le N$ï¼‰ï¼Œå½“ $i&lt;N$ æ—¶ï¼Œç¬¬ $i$ é¢—ç å­çš„å°¾æ ‡è®°åº”è¯¥ç­‰äºç¬¬ $i+1$ é¢—ç å­çš„å¤´æ ‡è®°ã€‚ç¬¬ $N$ é¢—ç å­çš„å°¾æ ‡è®°åº”è¯¥ç­‰äºç¬¬ $1$ é¢—ç å­çš„å¤´æ ‡è®°ã€‚</p><p>è‡³äºç å­çš„é¡ºåºï¼Œä½ å¯ä»¥è¿™æ ·ç¡®å®šï¼šå°†é¡¹é“¾æ”¾åˆ°æ¡Œé¢ä¸Šï¼Œä¸è¦å‡ºç°äº¤å‰ï¼Œéšæ„æŒ‡å®šç¬¬ä¸€é¢—ç å­ï¼Œç„¶åæŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç¡®å®šå…¶ä»–ç å­çš„é¡ºåºã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>ä¸€ä¸ªæ­£æ•´æ•° $E$ï¼ˆ$E\le 2.1 \times 10^9$ï¼‰ï¼Œä¸ºä¸€ä¸ªæœ€ä¼˜èšåˆé¡ºåºæ‰€é‡Šæ”¾çš„æ€»èƒ½é‡ã€‚</p><p><strong>æ ·ä¾‹ #1</strong></p><p>æ ·ä¾‹è¾“å…¥ #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>4
</span></span><span class=line><span class=cl>2 3 5 10
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>710
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong></p><p>NOIP 2006 æé«˜ç»„ ç¬¬ä¸€é¢˜</p><h3 id=æ€è·¯-2 class=headerLink><a href=#%e6%80%9d%e8%b7%af-2 class=header-mark></a>æ€è·¯</h3><p>å°†æ•°ç»„å¤„ç†æˆç¯å½¢æ•°ç»„ï¼Œè€ƒè™‘è½¬ç§»ï¼š
$$
f(i,j)=max(f(i,j),f(i,k)+f(k+1,j)+head[i]\times tail[k]\times tail[j])
$$
æšä¸¾é•¿åº¦ä¸º$n$çš„åŒºé—´ï¼Œè·å¾—æœ€å¤§å€¼ã€‚</p><h3 id=ä»£ç -2 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-2 class=header-mark></a>ä»£ç </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>pii</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>550</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>mo109</span> <span class=o>=</span> <span class=mi>1000000007</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>h</span><span class=p>[</span><span class=n>maxn</span><span class=p>],</span> <span class=n>t</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=n>n</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>n</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span><span class=p>[</span><span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>]</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>j</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>*</span> <span class=n>t</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>*</span> <span class=n>t</span><span class=p>[</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>ans</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>ans</span><span class=p>,</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>ans</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=noip2007-æé«˜ç»„-çŸ©é˜µå–æ•°æ¸¸æˆ class=headerLink><a href=#noip2007-%e6%8f%90%e9%ab%98%e7%bb%84-%e7%9f%a9%e9%98%b5%e5%8f%96%e6%95%b0%e6%b8%b8%e6%88%8f class=header-mark></a>[NOIP2007 æé«˜ç»„] çŸ©é˜µå–æ•°æ¸¸æˆ</h2><h3 id=é¢˜ç›®æè¿°-3 class=headerLink><a href=#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0-3 class=header-mark></a>é¢˜ç›®æè¿°</h3><p>å¸…å¸…ç»å¸¸è·ŸåŒå­¦ç©ä¸€ä¸ªçŸ©é˜µå–æ•°æ¸¸æˆï¼šå¯¹äºä¸€ä¸ªç»™å®šçš„ $n \times m$ çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´  $a_{i,j}$ å‡ä¸ºéè´Ÿæ•´æ•°ã€‚æ¸¸æˆè§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>æ¯æ¬¡å–æ•°æ—¶é¡»ä»æ¯è¡Œå„å–èµ°ä¸€ä¸ªå…ƒç´ ï¼Œå…± $n$ ä¸ªã€‚ç»è¿‡ $m$ æ¬¡åå–å®ŒçŸ©é˜µå†…æ‰€æœ‰å…ƒç´ ï¼›</li><li>æ¯æ¬¡å–èµ°çš„å„ä¸ªå…ƒç´ åªèƒ½æ˜¯è¯¥å…ƒç´ æ‰€åœ¨è¡Œçš„è¡Œé¦–æˆ–è¡Œå°¾ï¼›</li><li>æ¯æ¬¡å–æ•°éƒ½æœ‰ä¸€ä¸ªå¾—åˆ†å€¼ï¼Œä¸ºæ¯è¡Œå–æ•°çš„å¾—åˆ†ä¹‹å’Œï¼Œæ¯è¡Œå–æ•°çš„å¾—åˆ† = è¢«å–èµ°çš„å…ƒç´ å€¼ $\times 2^i$ï¼Œå…¶ä¸­ $i$ è¡¨ç¤ºç¬¬ $i$ æ¬¡å–æ•°ï¼ˆä» $1$ å¼€å§‹ç¼–å·ï¼‰ï¼›</li><li>æ¸¸æˆç»“æŸæ€»å¾—åˆ†ä¸º $m$ æ¬¡å–æ•°å¾—åˆ†ä¹‹å’Œã€‚</li></ol><p>å¸…å¸…æƒ³è¯·ä½ å¸®å¿™å†™ä¸€ä¸ªç¨‹åºï¼Œå¯¹äºä»»æ„çŸ©é˜µï¼Œå¯ä»¥æ±‚å‡ºå–æ•°åçš„æœ€å¤§å¾—åˆ†ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>è¾“å…¥æ–‡ä»¶åŒ…æ‹¬ $n+1$ è¡Œï¼š</p><p>ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•° $n$ å’Œ $m$ã€‚</p><p>ç¬¬ $2\sim n+1$ è¡Œä¸º $n \times m$ çŸ©é˜µï¼Œå…¶ä¸­æ¯è¡Œæœ‰ $m$ ä¸ªç”¨å•ä¸ªç©ºæ ¼éš”å¼€çš„éè´Ÿæ•´æ•°ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>è¾“å‡ºæ–‡ä»¶ä»…åŒ…å« $1$ è¡Œï¼Œä¸ºä¸€ä¸ªæ•´æ•°ï¼Œå³è¾“å…¥çŸ©é˜µå–æ•°åçš„æœ€å¤§å¾—åˆ†ã€‚</p><p><strong>æ ·ä¾‹ #1</strong></p><p>æ ·ä¾‹è¾“å…¥ #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>2 3
</span></span><span class=line><span class=cl>1 2 3
</span></span><span class=line><span class=cl>3 4 2
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>82
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong></p><p><strong>ã€æ•°æ®èŒƒå›´ã€‘</strong></p><p>å¯¹äº $60%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $1\le n,m\le 30$ï¼Œç­”æ¡ˆä¸è¶…è¿‡ $10^{16}$ã€‚<br>å¯¹äº $100%$ çš„æ•°æ®ï¼Œæ»¡è¶³ $1\le n,m\le 80$ï¼Œ$0\le a_{i,j}\le1000$ã€‚</p><p><strong>ã€é¢˜ç›®æ¥æºã€‘</strong></p><p>NOIP 2007 æé«˜ç¬¬ä¸‰é¢˜ã€‚</p><h3 id=æ€è·¯-3 class=headerLink><a href=#%e6%80%9d%e8%b7%af-3 class=header-mark></a>æ€è·¯</h3><p>è®¾ç½®$f(i,j)$è¡¨ç¤ºå–åŒºé—´$[i,j]$è·å¾—çš„æœ€å¤§å¾—åˆ†ï¼Œæ ¹æ®é¢˜æ„å¯çŸ¥ï¼Œæ¯è¡Œçš„æœ€å¤§å€¼ä¹‹é—´å¹¶ä¸ç›¸å…³ï¼Œå¯ä»¥åˆ†åˆ«è®¡ç®—æ¯è¡Œå–æ•°å¾—åˆ†çš„æœ€å¤§å€¼å†ç›¸åŠ ï¼Œæ³¨æ„æ­¤é¢˜æ¶‰åŠåˆ°é«˜ç²¾åº¦ã€‚</p><p>è€ƒè™‘è½¬ç§»ï¼š</p><p>$f(i,j)$å¯ä»¥ç”±ä¸¤ç§çŠ¶æ€è½¬ç§»è€Œæ¥ï¼Œä¸€ç§æ˜¯å…ˆå–$a[i]$ï¼Œå†å–$f(i+1,j)$ï¼Œè¿™æ—¶çš„å¾—åˆ†æ˜¯$f(i+1,j)\times 2 + a[i]\times 2$ï¼›å¦ä¸€ç§æ˜¯å…ˆå–$a[j]$ï¼Œå†å–$f(i,j-1)$ï¼Œè¿™æ—¶çš„å¾—åˆ†æ˜¯$f(i,j-1)\times 2+a[j]\times 2$ã€‚ä¸¤è€…å–è¾ƒå¤§å€¼å³å¯ã€‚</p><h3 id=ä»£ç -3 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-3 class=header-mark></a>ä»£ç </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>pii</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>550</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>mo109</span> <span class=o>=</span> <span class=mi>1000000007</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>ll</span> <span class=n>mo118</span> <span class=o>=</span> <span class=mf>1e18</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>int128</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>hig</span><span class=p>,</span> <span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>int128</span> <span class=k>operator</span><span class=o>+</span><span class=p>(</span><span class=k>const</span> <span class=n>int128</span><span class=o>&amp;</span> <span class=n>b</span><span class=p>)</span><span class=k>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>int128</span> <span class=n>k</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>0ll</span><span class=p>,</span><span class=mi>0ll</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=n>k</span><span class=p>.</span><span class=n>low</span> <span class=o>=</span> <span class=n>low</span> <span class=o>+</span> <span class=n>b</span><span class=p>.</span><span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>k</span><span class=p>.</span><span class=n>hig</span> <span class=o>=</span> <span class=n>k</span><span class=p>.</span><span class=n>low</span> <span class=o>/</span> <span class=n>mo118</span> <span class=o>+</span> <span class=n>hig</span> <span class=o>+</span> <span class=n>b</span><span class=p>.</span><span class=n>hig</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>k</span><span class=p>.</span><span class=n>low</span> <span class=o>%=</span> <span class=n>mo118</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>int128</span> <span class=k>operator</span><span class=o>*</span><span class=p>(</span><span class=k>const</span> <span class=kt>int</span><span class=o>&amp;</span> <span class=n>b</span><span class=p>)</span><span class=k>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>int128</span> <span class=n>k</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>0ll</span><span class=p>,</span><span class=mi>0ll</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=n>k</span><span class=p>.</span><span class=n>low</span> <span class=o>=</span> <span class=n>b</span> <span class=o>*</span> <span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>k</span><span class=p>.</span><span class=n>hig</span> <span class=o>=</span> <span class=n>k</span><span class=p>.</span><span class=n>low</span> <span class=o>/</span> <span class=n>mo118</span> <span class=o>+</span> <span class=n>hig</span> <span class=o>*</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>k</span><span class=p>.</span><span class=n>low</span> <span class=o>%=</span> <span class=n>mo118</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>output</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>hig</span><span class=p>)</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>hig</span> <span class=o>&lt;&lt;</span> <span class=n>setw</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>setfill</span><span class=p>(</span><span class=sc>&#39;0&#39;</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>bool</span> <span class=nf>leq</span><span class=p>(</span><span class=n>int128</span> <span class=n>a</span><span class=p>,</span> <span class=n>int128</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>hig</span> <span class=o>!=</span> <span class=n>b</span><span class=p>.</span><span class=n>hig</span><span class=p>)</span><span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>hig</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>hig</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>low</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>int128</span> <span class=n>a</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>int128</span> <span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>m</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>low</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>hig</span> <span class=o>=</span> <span class=mi>0ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>int128</span> <span class=n>ans</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>0ll</span><span class=p>,</span><span class=mi>0ll</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>ni</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>ni</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>ni</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>0ll</span><span class=p>,</span><span class=mi>0ll</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>len</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span><span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>int128</span> <span class=n>na</span> <span class=o>=</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>ni</span><span class=p>][</span><span class=n>i</span><span class=p>])</span> <span class=o>*</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>int128</span> <span class=n>nb</span> <span class=o>=</span> <span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>ni</span><span class=p>][</span><span class=n>j</span><span class=p>])</span> <span class=o>*</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=n>na</span><span class=p>,</span> <span class=n>nb</span><span class=p>,</span> <span class=n>leq</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span> <span class=o>=</span> <span class=n>ans</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>m</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ans</span><span class=p>.</span><span class=n>output</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ios::sync_with_stdio(false);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// cin.tie(0);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=cqoi2007-æ¶‚è‰² class=headerLink><a href=#cqoi2007-%e6%b6%82%e8%89%b2 class=header-mark></a>[CQOI2007] æ¶‚è‰²</h2><h3 id=é¢˜ç›®æè¿°-4 class=headerLink><a href=#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0-4 class=header-mark></a>é¢˜ç›®æè¿°</h3><p>å‡è®¾ä½ æœ‰ä¸€æ¡é•¿åº¦ä¸º $5$ çš„æœ¨æ¿ï¼Œåˆå§‹æ—¶æ²¡æœ‰æ¶‚è¿‡ä»»ä½•é¢œè‰²ã€‚ä½ å¸Œæœ›æŠŠå®ƒçš„ $5$ ä¸ªå•ä½é•¿åº¦åˆ†åˆ«æ¶‚ä¸Šçº¢ã€ç»¿ã€è“ã€ç»¿ã€çº¢è‰²ï¼Œç”¨ä¸€ä¸ªé•¿åº¦ä¸º $5$ çš„å­—ç¬¦ä¸²è¡¨ç¤ºè¿™ä¸ªç›®æ ‡ï¼š$\texttt{RGBGR}$ã€‚</p><p>æ¯æ¬¡ä½ å¯ä»¥æŠŠä¸€æ®µè¿ç»­çš„æœ¨æ¿æ¶‚æˆä¸€ä¸ªç»™å®šçš„é¢œè‰²ï¼Œåæ¶‚çš„é¢œè‰²è¦†ç›–å…ˆæ¶‚çš„é¢œè‰²ã€‚ä¾‹å¦‚ç¬¬ä¸€æ¬¡æŠŠæœ¨æ¿æ¶‚æˆ $\texttt{RRRRR}$ï¼Œç¬¬äºŒæ¬¡æ¶‚æˆ $\texttt{RGGGR}$ï¼Œç¬¬ä¸‰æ¬¡æ¶‚æˆ $\texttt{RGBGR}$ï¼Œè¾¾åˆ°ç›®æ ‡ã€‚</p><p>ç”¨å°½é‡å°‘çš„æ¶‚è‰²æ¬¡æ•°è¾¾åˆ°ç›®æ ‡ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>è¾“å…¥ä»…ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å­—ç¬¦ä¸²ï¼Œå³æ¶‚è‰²ç›®æ ‡ã€‚å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œä¸åŒçš„å­—æ¯ä»£è¡¨ä¸åŒé¢œè‰²ï¼Œç›¸åŒçš„å­—æ¯ä»£è¡¨ç›¸åŒé¢œè‰²ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>ä»…ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•°ï¼Œå³æœ€å°‘çš„æ¶‚è‰²æ¬¡æ•°ã€‚</p><p><strong>æ ·ä¾‹ #1</strong></p><p>æ ·ä¾‹è¾“å…¥ #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AAAAA
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>1
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ·ä¾‹ #2</strong></p><p>æ ·ä¾‹è¾“å…¥ #2</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>RGBGR
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #2</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>3
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong></p><p>$40%$ çš„æ•°æ®æ»¡è¶³ $1\le n\le 10$ã€‚</p><p>$100%$ çš„æ•°æ®æ»¡è¶³ $1\le n\le 50$ã€‚</p><h3 id=æ€è·¯-4 class=headerLink><a href=#%e6%80%9d%e8%b7%af-4 class=header-mark></a>æ€è·¯</h3><p>è®¾$f(i,j)$è¡¨ç¤ºå®ŒæˆåŒºé—´$[i,j]$çš„æœ€å°æ¶‚è‰²æ¬¡æ•°ã€‚å–$i\leq k\lt j$åˆ™$f(i,j)$å¯ä»¥ç”±$f(i,k)$å’Œ$f(k+1,j)$åˆå¹¶è½¬ç§»è€Œæ¥ï¼Œè½¬ç§»æ—¶ï¼Œè‹¥$s[k]=s[k+1]$ï¼Œæ˜¾ç„¶åœ¨åŒºé—´$[i,k]$ä¸­æ¶‚ä½ç½®$k$å’Œæ¶‚ä½ç½®$k+1$å¯ä»¥æ˜¯åŒä¸€æ­¥æ“ä½œï¼›è‹¥$s[i]=s[j]$ï¼Œåˆ™æ¶‚ä½ç½®$i$å’Œ$j$ä¹Ÿå¯ä»¥æ˜¯åŒä¸€æ­¥æ“ä½œï¼Œåˆ™è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š
$$
f(i,j)=f(i,k)+f(k+1,j)-(s[i]==s[j] \or s[k]==s[k+1])
$$</p><h3 id=ä»£ç -4 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-4 class=header-mark></a>ä»£ç </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>pii</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>550</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>mo109</span> <span class=o>=</span> <span class=mi>1000000007</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>ll</span> <span class=n>mo118</span> <span class=o>=</span> <span class=mf>1e18</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span> <span class=n>s</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span> <span class=o>=</span> <span class=s>&#34; &#34;</span> <span class=o>+</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=mf>1e18</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=c1>// f[i][j]:å®Œæˆ[i,j]åŒºé—´æ¶‚è‰²çš„æœ€å°æ¶‚è‰²æ¬¡æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>j</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>||</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[</span><span class=n>j</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span>
</span></span><span class=line><span class=cl>                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>n</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=scoi2003-å­—ç¬¦ä¸²æŠ˜å  class=headerLink><a href=#scoi2003-%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%8a%98%e5%8f%a0 class=header-mark></a>[SCOI2003] å­—ç¬¦ä¸²æŠ˜å </h2><h3 id=é¢˜ç›®æè¿°-5 class=headerLink><a href=#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0-5 class=header-mark></a>é¢˜ç›®æè¿°</h3><p>æŠ˜å çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><ol><li><p>ä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥çœ‹æˆå®ƒè‡ªèº«çš„æŠ˜å ã€‚è®°ä½œ <code>S = S</code></p></li><li><p><code>X(S)</code> æ˜¯ $X$ ä¸ª <code>S</code> è¿æ¥åœ¨ä¸€èµ·çš„ä¸²çš„æŠ˜å ã€‚è®°ä½œ <code>X(S) = SSSSâ€¦S</code>ã€‚</p></li><li><p>å¦‚æœ <code>A = Aâ€™</code>, <code>B = Bâ€™</code>ï¼Œåˆ™ <code>AB = Aâ€™Bâ€™ </code>ã€‚ä¾‹å¦‚ï¼šå› ä¸º <code>3(A) = AAA</code>, <code>2(B) = BB</code>ï¼Œæ‰€ä»¥ <code>3(A)C2(B) = AAACBB</code>ï¼Œè€Œ <code>2(3(A)C)2(B) = AAACAAACBB</code></p></li></ol><p>ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚å®ƒçš„æœ€çŸ­æŠ˜å ã€‚</p><p>ä¾‹å¦‚ <code>AAAAAAAAAABABABCCD</code> çš„æœ€çŸ­æŠ˜å ä¸ºï¼š<code>9(A)3(AB)CCD</code>ã€‚</p><p><strong>è¾“å…¥æ ¼å¼</strong></p><p>ä»…ä¸€è¡Œï¼Œå³å­—ç¬¦ä¸² <code>S</code>ï¼Œé•¿åº¦ä¿è¯ä¸è¶…è¿‡ $100$ã€‚</p><p><strong>è¾“å‡ºæ ¼å¼</strong></p><p>ä»…ä¸€è¡Œï¼Œå³æœ€çŸ­çš„æŠ˜å é•¿åº¦ã€‚</p><p><strong>æ ·ä¾‹ #1</strong></p><p>æ ·ä¾‹è¾“å…¥ #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>NEERCYESYESYESNEERCYESYESYES
</span></span></code></pre></td></tr></table></div></div><p>æ ·ä¾‹è¾“å‡º #1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>14
</span></span></code></pre></td></tr></table></div></div><p><strong>æç¤º</strong></p><p>ä¸€ä¸ªæœ€çŸ­çš„æŠ˜å ä¸ºï¼š<code>2(NEERC3(YES))</code></p><h3 id=æ€è·¯-5 class=headerLink><a href=#%e6%80%9d%e8%b7%af-5 class=header-mark></a>æ€è·¯</h3><p>è®¾$f(i,j)$æ˜¯åŒºé—´$[i,j]$æŠ˜å ä¹‹åçš„æœ€çŸ­é•¿åº¦ï¼Œå¦‚æœåŒºé—´$[i,j]$å¯ä»¥è¢«æŠ˜å ï¼Œåˆ™çŠ¶æ€è½¬ç§»ï¼š
$$
f(i,j)=max(f(i,j),f(i,k)+2+Len((j-i+1)/(k-i+1)))
$$</p><h3 id=ä»£ç -5 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-5 class=header-mark></a>ä»£ç </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>pii</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>550</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=kt>int</span> <span class=n>mo109</span> <span class=o>=</span> <span class=mi>1000000007</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>ll</span> <span class=n>mo118</span> <span class=o>=</span> <span class=mf>1e18</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>string</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>ll</span> <span class=n>ff</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>Len</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span><span class=k>return</span> <span class=o>-</span><span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>res</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span> <span class=o>/=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>bool</span> <span class=nf>check</span><span class=p>(</span><span class=kt>int</span> <span class=n>l</span><span class=p>,</span> <span class=kt>int</span> <span class=n>r</span><span class=p>,</span> <span class=kt>int</span> <span class=n>p</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>l</span> <span class=o>+</span> <span class=n>p</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>r</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=n>s</span><span class=p>[(</span><span class=n>i</span> <span class=o>-</span> <span class=n>l</span><span class=p>)</span> <span class=o>%</span> <span class=n>p</span> <span class=o>+</span> <span class=n>l</span><span class=p>])</span><span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span> <span class=o>=</span> <span class=s>&#34; &#34;</span> <span class=o>+</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>j</span> <span class=o>-</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span> <span class=c1>// S=S&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=n>len</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>len</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// åŒºé—´é•¿åº¦æ˜¯len
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>j</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>k</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>d</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>d</span> <span class=o>+</span> <span class=n>i</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&lt;</span> <span class=n>j</span><span class=p>;</span><span class=n>d</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>len</span> <span class=o>%</span> <span class=n>d</span><span class=p>)</span><span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=c1>// [i,j]æŒ‰ç…§é•¿åº¦dè¿›è¡ŒæŠ˜å 
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>d</span> <span class=o>+</span> <span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>check</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>d</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>min</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>],</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>+</span> <span class=n>Len</span><span class=p>(</span><span class=n>len</span> <span class=o>/</span> <span class=n>d</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>n</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></div><h2>ç›¸å…³å†…å®¹</h2><div class=related-container><div class=related-item-container><div class=related-image><a href=/posts/nc25wd4/><img loading=lazy src=https://img.dodolalorc.cn/i/2025/03/02/67c461f0d8665.jpg srcset="https://img.dodolalorc.cn/i/2025/03/02/67c461f0d8665.jpg, https://img.dodolalorc.cn/i/2025/03/02/67c461f0d8665.jpg 1.5x, https://img.dodolalorc.cn/i/2025/03/02/67c461f0d8665.jpg 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2025/03/02/67c461f0d8665.jpg title=https://img.dodolalorc.cn/i/2025/03/02/67c461f0d8665.jpg height=200 width=400></a></div><h2 class=related-title><a href=/posts/nc25wd4/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day4</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/nc25wd2/><img loading=lazy src=https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg srcset="https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg, https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg 1.5x, https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg title=https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg height=200 width=400></a></div><h2 class=related-title><a href=/posts/nc25wd2/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day2</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/nc25wd1/><img loading=lazy src=https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg srcset="https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg, https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg 1.5x, https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg title=https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg height=200 width=400></a></div><h2 class=related-title><a href=/posts/nc25wd1/>2025ç‰›å®¢æš‘å¯’å‡å¤šæ ¡è®­ç»ƒè¥Day1ï¼ˆå®Œçµï¼‰</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/cfround990div2/><img loading=lazy src=https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png srcset="https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png, https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png 1.5x, https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png title=https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png height=200 width=400></a></div><h2 class=related-title><a href=/posts/cfround990div2/>Codeforces Round 990 (Div. 2)</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/cfround980div2/><img loading=lazy src=https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png srcset="https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png, https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png 1.5x, https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png title=https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png height=200 width=400></a></div><h2 class=related-title><a href=/posts/cfround980div2/>Codeforces Round 980 (Div. 2)</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>æ›´æ–°äº 2025-03-02</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/posts/intervaldp/index.md target=_blank rel="noopener noreferrer">é˜…è¯»åŸå§‹æ–‡æ¡£</a></span></div><div class=post-info-share><span><a href=# title="åˆ†äº«åˆ° Twitter" data-sharer=twitter data-url=http://dodolalorc.cn/posts/intervaldp/ data-title=åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’ data-hashtags=ç®—æ³•,DP><i class="fab fa-twitter fa-fw"></i></a><a href=# title="åˆ†äº«åˆ° Facebook" data-sharer=facebook data-url=http://dodolalorc.cn/posts/intervaldp/ data-hashtag=ç®—æ³•><i class="fab fa-facebook-square fa-fw"></i></a><a href=# title="åˆ†äº«åˆ° Hacker News" data-sharer=hackernews data-url=http://dodolalorc.cn/posts/intervaldp/ data-title=åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’><i class="fab fa-hacker-news fa-fw"></i></a><a href=# title="åˆ†äº«åˆ° Line" data-sharer=line data-url=http://dodolalorc.cn/posts/intervaldp/ data-title=åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=# title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=http://dodolalorc.cn/posts/intervaldp/ data-title=åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’ data-image=https://img.dodolalorc.cn/i/2024/12/10/67580ba9b1658.png><i class="fab fa-weibo fa-fw"></i></a><a href=# title="åˆ†äº«åˆ° ç™¾åº¦" data-sharer=baidu data-url=http://dodolalorc.cn/posts/intervaldp/ data-title=åˆ·é¢˜è®°å½•||åŒºé—´åŠ¨æ€è§„åˆ’><i data-svg-src=/lib/simple-icons/icons/baidu.min.svg></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E7%AE%97%E6%B3%95/>ç®—æ³•</a>,&nbsp;<a href=/tags/dp/>DP</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/posts/segtree_practice/ class=prev rel=prev title=çº¿æ®µæ ‘ä¸“é¢˜ç»ƒä¹ ><i class="fas fa-angle-left fa-fw"></i>çº¿æ®µæ ‘ä¸“é¢˜ç»ƒä¹ </a>
<a href=/posts/cfround977div2/ class=next rel=next title="Codeforces Round 977 (Div. 2, based on COMPFEST 16 - Final Round)">Codeforces Round 977 (Div. 2, based on COMPFEST 16 - Final Round)<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=giscus></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/>giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line>ç”± <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.145.0">Hugo</a> å¼ºåŠ›é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜ - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.3.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://dodolalorc.cn/ target=_blank rel="noopener noreferrer">DODOLA</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><p class=beian><img class=beian-icon src=/img/icons/govbeian.png><a class=gov href="https://beian.mps.gov.cn/#/query/webSearch?code=33010902003733" rel=noreferrer title=æµ™å…¬ç½‘å®‰å¤‡33010902003733 target=_blank>æµ™å…¬ç½‘å®‰å¤‡33010902003733</a><a class=icp href=https://beian.miit.gov.cn/#/Integrated/index target=_blank title=æµ™ICPå¤‡2023048052å·-1>æµ™ICPå¤‡2023048052å·-1</a></p></span></div><div class=footer-line></div><div class=footer-line><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
<span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
<span id=busuanzi_value_site_uv></span></span></section></div></div><script type=text/javascript src=/js/custom.js></script></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=å›åˆ°é¡¶éƒ¨><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=æŸ¥çœ‹è¯„è®º><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><script type=text/javascript>window.config={code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",maxShownLines:50},comment:{giscus:{darkTheme:"dark",dataCategory:"Announcements",dataCategoryId:"DIC_kwDOLYjsRc4Clp7p",dataEmitMetadata:"0",dataInputPosition:"bottom",dataLang:"en",dataMapping:"pathname",dataReactionsEnabled:"1",dataRepo:"Florae006/Florae006.github.io",dataRepoId:"R_kgDOLYjsRQ",dataStrict:"0",lightTheme:"light"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},sharerjs:!0,table:{sort:!0}}</script><script type=text/javascript src=/js/giscus.min.js defer></script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script></div></body></html>