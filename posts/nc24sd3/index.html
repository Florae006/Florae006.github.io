<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>2024牛客暑假多校训练营Day3||补题 - Doごみ箱🪄</title><meta name=Description content="Doごみ箱2.1"><meta property="og:url" content="http://dodolalorc.cn/posts/nc24sd3/">
<meta property="og:site_name" content="Doごみ箱🪄"><meta property="og:title" content="2024牛客暑假多校训练营Day3||补题"><meta property="og:description" content="A-Bridging the Gap 2 题意在河岸的一侧有$n$个人，每个人有一个体力值$h_i$，有一艘船可以将人从一侧载到另一侧，每次航行需要至少$L$个人掌舵，每次掌舵会花费每个掌舵人的一点体力，当体力不足一点时，这个人不能再掌舵，船的容量最大是$R$，提问是否能够将这些人都运送到对岸。
数据范围 $1\leq L\lt R\leq n\leq 5\times 10^5$​ $1\leq h_i\leq 5\times 10^5$ 思路贪心的运输，从左岸运输的最小次数是$k=\lceil \frac{n-R}{R-L} \rceil$，计算每个人最多的来回次数$a_i$，假如满足$\sum_{i-1}^{n} min(k,a_i)\geq k\times L$，则可以将所有人都运输到对岸。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-23T18:37:58+08:00"><meta property="article:modified_time" content="2025-03-02T10:43:00+00:00"><meta property="article:tag" content="2024暑假集训"><meta property="article:tag" content="算法"><meta property="article:tag" content="牛客"><meta property="og:image" content="http://dodolalorc.cn/img/dodola.png"><meta property="og:see_also" content="http://dodolalorc.cn/posts/nc25wd2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/nc25wd1/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/cfround990div2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/cfround980div2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/23hangzhouicpc/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/cfround977div2/"><meta property="og:see_also" content="http://dodolalorc.cn/posts/intervaldp/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://dodolalorc.cn/img/dodola.png"><meta name=twitter:title content="2024牛客暑假多校训练营Day3||补题"><meta name=twitter:description content="A-Bridging the Gap 2 题意在河岸的一侧有$n$个人，每个人有一个体力值$h_i$，有一艘船可以将人从一侧载到另一侧，每次航行需要至少$L$个人掌舵，每次掌舵会花费每个掌舵人的一点体力，当体力不足一点时，这个人不能再掌舵，船的容量最大是$R$，提问是否能够将这些人都运送到对岸。
数据范围 $1\leq L\lt R\leq n\leq 5\times 10^5$​ $1\leq h_i\leq 5\times 10^5$ 思路贪心的运输，从左岸运输的最小次数是$k=\lceil \frac{n-R}{R-L} \rceil$，计算每个人最多的来回次数$a_i$，假如满足$\sum_{i-1}^{n} min(k,a_i)\geq k\times L$，则可以将所有人都运输到对岸。"><meta name=application-name content="Doごみ箱-一只小菜鸡的Blog"><meta name=apple-mobile-web-app-title content="Doごみ箱-一只小菜鸡的Blog"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/logo.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://dodolalorc.cn/posts/nc24sd3/><link rel=prev href=http://dodolalorc.cn/posts/hdu24sd1/><link rel=next href=http://dodolalorc.cn/posts/nc24sd4/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script defer src=https://cloud.umami.is/script.js data-website-id=6137bed0-27b6-493f-8fb1-3f054e6795b7></script><link rel=stylesheet href=https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Medium/result.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"2024牛客暑假多校训练营Day3||补题","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/dodolalorc.cn\/posts\/nc24sd3\/"},"genre":"posts","keywords":"2024暑假集训, 算法, 牛客","wordcount":3827,"url":"http:\/\/dodolalorc.cn\/posts\/nc24sd3\/","datePublished":"2024-07-23T18:37:58+08:00","dateModified":"2025-03-02T10:43:00+00:00","license":"dodola","publisher":{"@type":"Organization","name":"DODOLA","logo":"http:\/\/dodolalorc.cn\/images\/miku.jpg"},"author":{"@type":"Person","name":"DODOLA"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Doごみ箱🪄><span class=header-title-pre>🗑️</span>Doごみ箱2.1<span class=header-title-post>🐾</span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts>🐙 文章 </a><a class=menu-item href=/series/>🌠 系列 </a><a class=menu-item href=/categories/>📂 分类 </a><a class=menu-item href=/tags/>🏷︎ 标签 </a><a class=menu-item href=/links/>🧸 友链 </a><a class=menu-item href=/about/>🍅 关于 </a><a class=menu-item href=/comments/><i class="fa-solid fa-comment" style=color:#63e6be></i> 留言 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="搜索本站内容( •̀ ω •́ )y" id=search-input-desktop>
<a href=# class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=# class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=# class="menu-item theme-select" title><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Doごみ箱🪄><span class=header-title-pre>🗑️</span>Doごみ箱2.1<span class=header-title-post>🐾</span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索本站内容( •̀ ω •́ )y" id=search-input-mobile>
<a href=# class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=# class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts title>🐙文章</a><a class=menu-item href=/series/ title>🌠系列</a><a class=menu-item href=/categories/ title>📂分类</a><a class=menu-item href=/tags/ title>🏷︎标签</a><a class=menu-item href=/links/ title>🧸友链</a><a class=menu-item href=/about/ title>🍅关于</a><a class=menu-item href=/comments/ title><i class="fa-solid fa-comment" style=color:#63e6be></i>留言</a><a href=# class="menu-item theme-select" title>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#a-bridging-the-gap-2>A-Bridging the Gap 2</a><ul><li><a href=#题意>题意</a><ul><li><a href=#数据范围>数据范围</a></li></ul></li><li><a href=#思路>思路</a></li><li><a href=#代码>代码</a></li></ul></li><li><a href=#b-crash-test>B-Crash Test</a><ul><li><a href=#题意-1>题意</a><ul><li><a href=#数据范围-1>数据范围</a></li></ul></li><li><a href=#思路-1>思路</a></li><li><a href=#代码-1>代码</a></li></ul></li><li><a href=#d-dominoes>D-Dominoes!</a><ul><li><a href=#题意-2>题意</a><ul><li><a href=#数据范围-2>数据范围</a></li></ul></li><li><a href=#思路-2>思路</a></li><li><a href=#代码-2>代码</a></li></ul></li><li><a href=#e-malfunctioning-typewriter>E-Malfunctioning Typewriter</a><ul><li><a href=#题意-3>题意</a><ul><li><a href=#数据范围-3>数据范围</a></li></ul></li><li><a href=#思路-3>思路</a></li><li><a href=#代码-3>代码</a></li></ul></li><li><a href=#j-rigged-games>J-Rigged Games</a><ul><li><a href=#题意-4>题意</a><ul><li><a href=#数据范围-4>数据范围</a></li></ul></li><li><a href=#思路-4>思路</a></li><li><a href=#代码-4>代码</a></li></ul></li><li><a href=#l-sudoku-and-minesweeper>L-Sudoku and Minesweeper</a><ul><li><a href=#题意-5>题意</a></li><li><a href=#思路-5>思路</a></li><li><a href=#代码-5>代码</a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">2024牛客暑假多校训练营Day3||补题</h1><div class=post-meta><div class=post-meta-line><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://dodolalorc.cn/ title=Author target=_blank rel="noopener noreferrer author" class=author>DODOLA</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E5%9C%A8%E5%AD%A6%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%A5%E5%AD%90%E9%87%8C/><i class="far fa-folder fa-fw"></i>在学算法的日子里</a></span>&nbsp;<span class=post-category>和</span>&nbsp;<span class=post-series>系列 <a href=/series/%E9%A2%98%E8%A7%A3%E8%AE%B0%E5%BD%95/><i class="far fa-list-alt fa-fw"></i>题解记录</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2024-07-23>2024-07-23</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2025-03-02>2025-03-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3827 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;
<span id=busuanzi_container_value_page_pv><i class="far fa-eye fa-fw"></i>
<span id=busuanzi_value_page_pv></span>&nbsp;次阅读</span></div></div><div class="details series-nav open"><div class="details-summary series-title"><span>系列 - 题解记录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content series-content"><nav><ul><li><a href=/posts/nc25wd2/>2025牛客暑寒假多校训练营Day2</a></li><li><a href=/posts/nc25wd1/>2025牛客暑寒假多校训练营Day1（完結）</a></li><li><a href=/posts/cfround990div2/>Codeforces Round 990 (Div. 2)</a></li><li><a href=/posts/cfround980div2/>Codeforces Round 980 (Div. 2)</a></li><li><a href=/posts/23hangzhouicpc/>2023杭州ICPC区域赛</a></li><li><a href=/posts/cfround977div2/>Codeforces Round 977 (Div. 2, based on COMPFEST 16 - Final Round)</a></li><li><a href=/posts/intervaldp/>刷题记录||区间动态规划</a></li><li><a href=/posts/segtree_practice/>线段树专题练习</a></li><li><a href=/posts/nc24sd10/>2024牛客暑假多校训练营Day10||补题</a></li><li><a href=/posts/nc24sd8/>2024牛客暑假多校训练营Day8||补题</a></li><li><a href=/posts/nc24sd7/>2024牛客暑假多校训练营Day7||补题</a></li><li><a href=/posts/nc24sd6/>2024牛客暑假多校训练营Day6||补题</a></li><li><a href=/posts/nc24sd5/>2024牛客暑假多校训练营Day5||补题</a></li><li><a href=/posts/nc24sd4/>2024牛客暑假多校训练营Day4||补题</a></li><li><span class=active>2024牛客暑假多校训练营Day3||补题</span></li><li><a href=/posts/hdu24sd1/>2024杭电钉耙编程联赛Day1||补题</a></li><li><a href=/posts/nc24sd2/>2024牛客暑假多校训练营Day2||补题</a></li><li><a href=/posts/nc24sd1/>2024牛客暑假多校训练营Day1||补题</a></li><li><a href=/posts/24jilinccpc/>2024吉林省赛补题记录</a></li><li><a href=/posts/cfround930div2/>Codeforces Round 930(div2)</a></li><li><a href=/posts/cfround931div2/>Codeforces Round 931(div2)</a></li><li><a href=/posts/cfround932div2/>Codeforces Round 932(div2)</a></li><li><a href=/posts/cfround933div3/>Codeforces Round 933(div3)</a></li><li><a href=/posts/lineardp/>刷题记录||线性动态规划</a></li><li><a href=/posts/cfedu162div2/>Educational Codeforces Round 162(div2)</a></li><li><a href=/posts/cfround929div3/>Codeforces Round 929(div3)</a></li><li><a href=/posts/cfround927div3/>Codeforces Round 927(div3)</a></li><li><a href=/posts/nc24wd6/>2024牛客寒假营6||补题</a></li><li><a href=/posts/nc24wd4/>2024牛客寒假营4||补题</a></li><li><a href=/posts/nc24wd5/>2024牛客寒假营5||补题</a></li><li><a href=/posts/nc24wd3/>2024牛客寒假营3||补题</a></li><li><a href=/posts/nc24wd2/>2024牛客寒假营2||补题</a></li><li><a href=/posts/nc24wd1/>2024牛客寒假营1||补题</a></li><li><a href=/posts/nenuoj/>NENU2023学年算法2例题</a></li></ul></nav></div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#a-bridging-the-gap-2>A-Bridging the Gap 2</a><ul><li><a href=#题意>题意</a><ul><li><a href=#数据范围>数据范围</a></li></ul></li><li><a href=#思路>思路</a></li><li><a href=#代码>代码</a></li></ul></li><li><a href=#b-crash-test>B-Crash Test</a><ul><li><a href=#题意-1>题意</a><ul><li><a href=#数据范围-1>数据范围</a></li></ul></li><li><a href=#思路-1>思路</a></li><li><a href=#代码-1>代码</a></li></ul></li><li><a href=#d-dominoes>D-Dominoes!</a><ul><li><a href=#题意-2>题意</a><ul><li><a href=#数据范围-2>数据范围</a></li></ul></li><li><a href=#思路-2>思路</a></li><li><a href=#代码-2>代码</a></li></ul></li><li><a href=#e-malfunctioning-typewriter>E-Malfunctioning Typewriter</a><ul><li><a href=#题意-3>题意</a><ul><li><a href=#数据范围-3>数据范围</a></li></ul></li><li><a href=#思路-3>思路</a></li><li><a href=#代码-3>代码</a></li></ul></li><li><a href=#j-rigged-games>J-Rigged Games</a><ul><li><a href=#题意-4>题意</a><ul><li><a href=#数据范围-4>数据范围</a></li></ul></li><li><a href=#思路-4>思路</a></li><li><a href=#代码-4>代码</a></li></ul></li><li><a href=#l-sudoku-and-minesweeper>L-Sudoku and Minesweeper</a><ul><li><a href=#题意-5>题意</a></li><li><a href=#思路-5>思路</a></li><li><a href=#代码-5>代码</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=a-bridging-the-gap-2 class=headerLink><a href=#a-bridging-the-gap-2 class=header-mark></a>A-Bridging the Gap 2</h2><h3 id=题意 class=headerLink><a href=#%e9%a2%98%e6%84%8f class=header-mark></a>题意</h3><p>在河岸的一侧有$n$个人，每个人有一个体力值$h_i$，有一艘船可以将人从一侧载到另一侧，每次航行需要至少$L$个人掌舵，每次掌舵会花费每个掌舵人的一点体力，当体力不足一点时，这个人不能再掌舵，船的容量最大是$R$，提问是否能够将这些人都运送到对岸。</p><h4 id=数据范围 class=headerLink><a href=#%e6%95%b0%e6%8d%ae%e8%8c%83%e5%9b%b4 class=header-mark></a>数据范围</h4><ul><li>$1\leq L\lt R\leq n\leq 5\times 10^5$​</li><li>$1\leq h_i\leq 5\times 10^5$</li></ul><h3 id=思路 class=headerLink><a href=#%e6%80%9d%e8%b7%af class=header-mark></a>思路</h3><p>贪心的运输，从左岸运输的最小次数是$k=\lceil \frac{n-R}{R-L} \rceil$，计算每个人最多的来回次数$a_i$，假如满足$\sum_{i-1}^{n} min(k,a_i)\geq k\times L$，则可以将所有人都运输到对岸。</p><h3 id=代码 class=headerLink><a href=#%e4%bb%a3%e7%a0%81 class=header-mark></a>代码</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>ll</span> <span class=n>h</span><span class=p>[</span><span class=n>maxn</span><span class=p>],</span> <span class=n>a</span><span class=p>[</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>L</span><span class=p>,</span> <span class=n>R</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>L</span> <span class=o>&gt;&gt;</span> <span class=n>R</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>k</span> <span class=o>=</span> <span class=p>(</span><span class=n>n</span> <span class=o>-</span> <span class=n>L</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=n>R</span> <span class=o>-</span> <span class=n>L</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=n>min</span><span class=p>(</span><span class=n>k</span><span class=p>,</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>sum</span> <span class=o>&gt;=</span> <span class=n>k</span> <span class=o>*</span> <span class=n>L</span><span class=p>)</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Yes</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;No</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=b-crash-test class=headerLink><a href=#b-crash-test class=header-mark></a>B-Crash Test</h2><h3 id=题意-1 class=headerLink><a href=#%e9%a2%98%e6%84%8f-1 class=header-mark></a>题意</h3><p>小车有$n$个引擎，第$i$个引擎可以让车前进$h[i]$米。在小车起点正前方距离为$D$处有一反弹墙面，小车如果撞在墙上将会被回弹与当前剩余的前进米数相同的距离，并保持车头朝向墙面。小车可以使用任意引擎任意次，询问距离墙面最近的距离是多少。</p><h4 id=数据范围-1 class=headerLink><a href=#%e6%95%b0%e6%8d%ae%e8%8c%83%e5%9b%b4-1 class=header-mark></a>数据范围</h4><ul><li>$1\leq n\leq 100$</li><li>$1\leq D \leq 10^{18}$</li><li>$1\leq h[i]\leq 10^{18}$</li></ul><h3 id=思路-1 class=headerLink><a href=#%e6%80%9d%e8%b7%af-1 class=header-mark></a>思路</h3><p>假设当前选择了某个引擎，并只使用这个引擎，易知，我们可以将距离$d$减小到$\min(d\bmod h[i],h[i]-d\bmod h[i])$。</p><p>接下来选择另一种引擎，在刚才的基础上，我们可以将距离减小到$\min(d\bmod h[i+1],h[i+1]-d\bmod h[i+1])$。</p><p>设$gcd(h[i],h[i+1])=k$，$h[i]=ak,h[i+1]=bk$，则$d$的变化其实是这样的：</p><p>$$
\begin{align*}
d_1=&\min(d_0\bmod ak,d_0-d_0\bmod ak)\\
=&\min(d_0\bmod k,d_0-d_0\bmod k)\\
\\
d_2=&\min(d_1\bmod bk,d_1-d_1\bmod bk)\\
=&\min(d_1\bmod k,d_1-d_1\bmod k)\\
=&amp;d_1\\
=&\min(d_0\bmod k,d_0-d_0\bmod k)\\
\\
&&mldr;&mldr;.
\end{align*}
$$</p><p>观察结果，可以发现最小的$|dis-d|$之和所有引擎的$gcd$有关，计算$h[]$数组的$gcd$即可。</p><h3 id=代码-1 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-1 class=header-mark></a>代码</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>n</span><span class=p>,</span> <span class=n>d</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>ll</span><span class=o>&gt;</span><span class=n>h</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>ll</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>sort</span><span class=p>(</span><span class=n>h</span><span class=p>.</span><span class=n>begin</span><span class=p>()</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>h</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>x</span> <span class=o>=</span> <span class=n>h</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>ll</span> <span class=n>i</span> <span class=o>=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span> <span class=o>=</span> <span class=n>gcd</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>h</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>min</span><span class=p>(</span><span class=n>d</span> <span class=o>%</span> <span class=n>x</span><span class=p>,</span> <span class=n>x</span> <span class=o>-</span> <span class=n>d</span> <span class=o>%</span> <span class=n>x</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=d-dominoes class=headerLink><a href=#d-dominoes class=header-mark></a>D-Dominoes!</h2><h3 id=题意-2 class=headerLink><a href=#%e9%a2%98%e6%84%8f-2 class=header-mark></a>题意</h3><p>一张多米诺骨牌的左右两端各有一个数字，给出$n$张这样的多米诺骨牌，是否存在一个可以另所有相邻且不在同一张牌上的两个数字不一样的序列。</p><h4 id=数据范围-2 class=headerLink><a href=#%e6%95%b0%e6%8d%ae%e8%8c%83%e5%9b%b4-2 class=header-mark></a>数据范围</h4><ul><li>$1\leq n\leq 2\times 10^5$</li><li>$1\leq x_i,y_i\leq 10^9$</li></ul><h3 id=思路-2 class=headerLink><a href=#%e6%80%9d%e8%b7%af-2 class=header-mark></a>思路</h3><p>首先注意到当 某个数字的数量大于等于$n+2$时，一定没有合法的排列。</p><p>而如果符合$\lt n+2$，一定有合法序列。</p><p>如果所有骨牌都满足$x_i\neq y_i$，则只要满足每次从两侧加入的牌相邻没有相同数字即可，一定有合法序列。</p><p>优先考虑排列$x_i=y_i$的骨牌。将$x_i = y_i$的骨牌按照数量从大到小排序，每次选择一张牌，假设这张牌的数字是$p$，之后选择现存数量最多的且符合$x_j = y_j\neq p$的一张牌，放在右侧，接下来继续取两侧相同骨牌中数目最多的，若两侧相同骨牌数目不足$2$种，则加入任意两侧不同的牌，注意接触端的条件</p><h3 id=代码-2 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-2 class=header-mark></a>代码</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>ll</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mf>2e5</span> <span class=o>+</span> <span class=mi>50</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Domi</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=k>operator</span><span class=o>==</span><span class=p>(</span><span class=k>const</span> <span class=n>Domi</span><span class=o>&amp;</span> <span class=n>d</span><span class=p>)</span><span class=k>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nf>tie</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>==</span> <span class=n>tie</span><span class=p>(</span><span class=n>d</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>d</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=k>operator</span><span class=o>!=</span><span class=p>(</span><span class=k>const</span> <span class=n>Domi</span><span class=o>&amp;</span> <span class=n>d</span><span class=p>)</span><span class=k>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nf>tie</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>!=</span> <span class=n>tie</span><span class=p>(</span><span class=n>d</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>d</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=k>operator</span><span class=o>&lt;</span><span class=p>(</span><span class=k>const</span> <span class=n>Domi</span><span class=o>&amp;</span> <span class=n>d</span><span class=p>)</span><span class=k>const</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nf>tie</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>tie</span><span class=p>(</span><span class=n>d</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>d</span><span class=p>.</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>bool</span> <span class=nf>compare</span><span class=p>(</span><span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=n>ll</span><span class=p>,</span> <span class=n>Domi</span><span class=o>&gt;&amp;</span> <span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=n>pair</span><span class=o>&lt;</span><span class=n>ll</span><span class=p>,</span> <span class=n>Domi</span><span class=o>&gt;&amp;</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>==</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>)</span><span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>second</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>second</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span><span class=p>.</span><span class=n>first</span> <span class=o>&gt;</span> <span class=n>b</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>n</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Domi</span><span class=o>&gt;</span><span class=n>v</span><span class=p>,</span> <span class=n>w</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>map</span><span class=o>&lt;</span><span class=n>ll</span><span class=p>,</span> <span class=n>ll</span><span class=o>&gt;</span><span class=n>cnt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>ll</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>ll</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>x</span> <span class=o>&gt;&gt;</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>&gt;</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span> <span class=o>^</span> <span class=n>y</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>x</span> <span class=o>^</span> <span class=n>y</span><span class=p>,</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span> <span class=o>^</span> <span class=n>y</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>cnt</span><span class=p>[</span><span class=n>x</span><span class=p>]</span><span class=o>++</span><span class=p>,</span> <span class=n>cnt</span><span class=p>[</span><span class=n>y</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>v</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span> <span class=n>x</span><span class=p>,</span><span class=n>y</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>w</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span> <span class=n>x</span><span class=p>,</span><span class=n>y</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>lv</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>lw</span> <span class=o>=</span> <span class=n>w</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>i</span> <span class=p>:</span> <span class=n>cnt</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>second</span> <span class=o>&gt;=</span> <span class=n>n</span> <span class=o>+</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;No</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Yes</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>struct</span> <span class=nc>Domi</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>d</span> <span class=o>=</span> <span class=n>w</span><span class=p>.</span><span class=n>back</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>d</span> <span class=o>=</span> <span class=n>v</span><span class=p>.</span><span class=n>back</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>d</span><span class=p>.</span><span class=n>x</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>d</span><span class=p>.</span><span class=n>y</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>sort</span><span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>v</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>priority_queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=n>ll</span><span class=p>,</span> <span class=n>Domi</span><span class=o>&gt;&gt;</span><span class=n>pris</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>ll</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>lv</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>!=</span> <span class=n>v</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>pris</span><span class=p>.</span><span class=n>push</span><span class=p>({</span> <span class=n>c</span><span class=p>,</span><span class=n>v</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=n>c</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>c</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>lv</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>pris</span><span class=p>.</span><span class=n>push</span><span class=p>({</span> <span class=n>c</span><span class=p>,</span><span class=n>v</span><span class=p>.</span><span class=n>back</span><span class=p>()</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Domi</span><span class=o>&gt;</span><span class=n>ans</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>pw</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>las</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=o>!</span><span class=n>pris</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span> <span class=o>||</span> <span class=n>pw</span> <span class=o>&lt;</span> <span class=n>lw</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>pris</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>struct</span> <span class=nc>Domi</span> <span class=n>x</span> <span class=o>=</span> <span class=n>w</span><span class=p>[</span><span class=n>pw</span><span class=o>++</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>x</span> <span class=o>==</span> <span class=n>las</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span> <span class=o>=</span> <span class=p>{</span> <span class=n>x</span><span class=p>.</span><span class=n>y</span><span class=p>,</span><span class=n>x</span><span class=p>.</span><span class=n>x</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ans</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>las</span> <span class=o>=</span> <span class=n>x</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=p>[</span><span class=n>cntx</span><span class=p>,</span> <span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>pris</span><span class=p>.</span><span class=n>top</span><span class=p>();</span><span class=n>pris</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>las</span> <span class=o>!=</span> <span class=n>x</span><span class=p>.</span><span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cntx</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>cntx</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>pris</span><span class=p>.</span><span class=n>push</span><span class=p>({</span> <span class=n>cntx</span><span class=p>,</span><span class=n>x</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ans</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>las</span> <span class=o>=</span> <span class=n>x</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>pris</span><span class=p>.</span><span class=n>empty</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>pris</span><span class=p>.</span><span class=n>push</span><span class=p>({</span> <span class=n>cntx</span><span class=p>,</span><span class=n>x</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>w</span><span class=p>[</span><span class=n>pw</span><span class=o>++</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>x</span> <span class=o>==</span> <span class=n>las</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span> <span class=o>=</span> <span class=p>{</span> <span class=n>x</span><span class=p>.</span><span class=n>y</span><span class=p>,</span><span class=n>x</span><span class=p>.</span><span class=n>x</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>ans</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>las</span> <span class=o>=</span> <span class=n>x</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>auto</span> <span class=p>[</span><span class=n>cnty</span><span class=p>,</span> <span class=n>y</span><span class=p>]</span> <span class=o>=</span> <span class=n>pris</span><span class=p>.</span><span class=n>top</span><span class=p>();</span><span class=n>pris</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>pris</span><span class=p>.</span><span class=n>push</span><span class=p>({</span> <span class=n>cntx</span><span class=p>,</span><span class=n>x</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=n>cnty</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>cnty</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>pris</span><span class=p>.</span><span class=n>push</span><span class=p>({</span> <span class=n>cnty</span><span class=p>,</span><span class=n>y</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>las</span> <span class=o>=</span> <span class=n>y</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=k>auto</span> <span class=nl>i</span> <span class=p>:</span> <span class=n>ans</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>i</span><span class=p>.</span><span class=n>x</span> <span class=o>&lt;&lt;</span> <span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>i</span><span class=p>.</span><span class=n>y</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>t</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; t;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>t</span><span class=o>--</span><span class=p>)</span><span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=e-malfunctioning-typewriter class=headerLink><a href=#e-malfunctioning-typewriter class=header-mark></a>E-Malfunctioning Typewriter</h2><h3 id=题意-3 class=headerLink><a href=#%e9%a2%98%e6%84%8f-3 class=header-mark></a>题意</h3><p>有一台打字机，对于每次键入的字符（只有<code>0</code>或<code>1</code>），每次有<code>p</code>的概率正确键入，有$n$句长度为$m$的不会重复的诗句，这些诗句可以以任意顺序组合成一首长度为$n$的诗。询问在打字这首诗的时候，有多大的概率成果打出。</p><h4 id=数据范围-3 class=headerLink><a href=#%e6%95%b0%e6%8d%ae%e8%8c%83%e5%9b%b4-3 class=header-mark></a>数据范围</h4><ul><li>$1\leq n,m\leq 1000$</li><li>$0.5\leq q\leq 1$</li></ul><h3 id=思路-3 class=headerLink><a href=#%e6%80%9d%e8%b7%af-3 class=header-mark></a>思路</h3><p>将$n$句诗建立字典树，对每个节点统计以该结点为前缀的字符串数目。</p><p>考虑到只有<code>01</code>，每个节点下最多只有<code>0</code>或<code>1</code>的子节点。记某个节点为$u$，将节点$u$前缀打对的概率可以预处理（$f(x,y)$表示打对$x$个$1$，$y$个$0$的概率），打对一整首诗歌是遍历完字典树上的每个字符串$1$次，对于字典树上的某个非叶子节点，在遍历时，经过该结点的数目是它的子树中有多少个叶子结点决定的，假设有$x$是从该节点（表示一个前缀）往后以<code>1</code>为根节点的子树中的叶子结点数目，$y$是以<code>0</code>为根节点的子树中叶子结点的数目，那么在决策当前是否正确输出了<code>0/1</code>的概率是$f(x,y)$（相当于在当前节点输出正确的$x$个<code>1</code>和$y$个<code>0</code>的概率代表这一步打字输出了$x+y$个合法下行子串的概率），故总概率是$\prod_u f(sz(lp),sz(rp))$。</p><p>对$f(x,y)$的预处理：</p><p>$$
f(x,y)=\max(p\times f(x-1,y)+(1-p)\times f(x,y),p\times f(x,y-1)+(1-p)\times f(x-1,y))
$$</p><h3 id=代码-3 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-3 class=header-mark></a>代码</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include&lt;bits/stdc++.h&gt;
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>long</span> <span class=kt>long</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>double</span> <span class=n>ld</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>ll</span> <span class=n>maxn</span> <span class=o>=</span> <span class=mi>1010</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>node</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>nxt</span><span class=p>[</span><span class=n>maxn</span> <span class=o>*</span> <span class=n>maxn</span><span class=p>][</span><span class=mi>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>sz</span><span class=p>[</span><span class=n>maxn</span> <span class=o>*</span> <span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>triInsert</span><span class=p>(</span><span class=n>string</span> <span class=n>s</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>p</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=sc>&#39;0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>nxt</span><span class=p>[</span><span class=n>p</span><span class=p>][</span><span class=n>c</span><span class=p>])</span><span class=n>nxt</span><span class=p>[</span><span class=n>p</span><span class=p>][</span><span class=n>c</span><span class=p>]</span> <span class=o>=</span> <span class=o>++</span><span class=n>node</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>sz</span><span class=p>[</span><span class=n>nxt</span><span class=p>[</span><span class=n>p</span><span class=p>][</span><span class=n>c</span><span class=p>]]</span><span class=o>++</span><span class=p>;</span> <span class=c1>// 以这个点为前缀的字符串数目
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>p</span> <span class=o>=</span> <span class=n>nxt</span><span class=p>[</span><span class=n>p</span><span class=p>][</span><span class=n>c</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ld</span> <span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=n>maxn</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>,</span> <span class=n>m</span><span class=p>;</span><span class=n>ld</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>m</span> <span class=o>&gt;&gt;</span> <span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>string</span><span class=o>&gt;</span><span class=n>st</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>string</span> <span class=n>s</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>triInsert</span><span class=p>(</span><span class=n>s</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>1.0</span><span class=p>;</span> <span class=c1>// 打出0个1,0个0概率为1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>x</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>x</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// f(x,y):恰好正确打出x个1,y个0
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>y</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span><span class=n>y</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>x</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>y</span><span class=p>)</span><span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>ld</span> <span class=n>w</span> <span class=o>=</span> <span class=n>x</span> <span class=o>?</span> <span class=n>f</span><span class=p>[</span><span class=n>x</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>y</span><span class=p>]</span> <span class=o>:</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>ld</span> <span class=n>v</span> <span class=o>=</span> <span class=n>y</span> <span class=o>?</span> <span class=n>f</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>:</span> <span class=mf>0.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>x</span><span class=p>][</span><span class=n>y</span><span class=p>]</span> <span class=o>=</span> <span class=n>max</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>p</span> <span class=o>*</span> <span class=n>w</span> <span class=o>+</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>p</span><span class=p>)</span> <span class=o>*</span> <span class=n>v</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>p</span> <span class=o>*</span> <span class=n>v</span> <span class=o>+</span> <span class=p>(</span><span class=mi>1</span> <span class=o>-</span> <span class=n>p</span><span class=p>)</span> <span class=o>*</span> <span class=n>w</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ld</span> <span class=n>ans</span> <span class=o>=</span> <span class=mf>1.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>node</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span> <span class=o>*=</span> <span class=n>f</span><span class=p>[</span><span class=n>sz</span><span class=p>[</span><span class=n>nxt</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]]][</span><span class=n>sz</span><span class=p>[</span><span class=n>nxt</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]]];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;%.12lf&#34;</span><span class=p>,</span> <span class=n>ans</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>_</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// cin &gt;&gt; _;cin.get();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span> <span class=p>(</span><span class=n>_</span><span class=o>--</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>solve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=j-rigged-games class=headerLink><a href=#j-rigged-games class=header-mark></a>J-Rigged Games</h2><h3 id=题意-4 class=headerLink><a href=#%e9%a2%98%e6%84%8f-4 class=header-mark></a>题意</h3><p>比赛由大分比和小分比一同决定最终的胜负，小分比<code>Bo2a-1</code>：先胜出<code>a</code>场为胜。大分比<code>Bo2b-1</code>：先胜出<code>b</code>场为胜。记1次小分比胜负为大分比的一场。</p><p>现在有一个长度为$n$的<code>01</code>字符串，字符串是无限循环重复的，用于记录每一次比赛的胜负，从<code>01</code>字符串的每个位置开始比赛，询问谁会赢得整个比赛。</p><h4 id=数据范围-4 class=headerLink><a href=#%e6%95%b0%e6%8d%ae%e8%8c%83%e5%9b%b4-4 class=header-mark></a>数据范围</h4><ul><li>$1\leq n,a,b\leq 10^5$</li></ul><h3 id=思路-4 class=headerLink><a href=#%e6%80%9d%e8%b7%af-4 class=header-mark></a>思路</h3><p>倍增思想，在<code>01</code>循环串中，记录每个位置开始后进行<code>Bo2a-1</code>小局的胜负，以及下一步从哪个位置开始。数组<code>f[i][j]</code>表示从$i$开始进行$2^j$轮后到达的位置、对应的$0$、$1$​的胜利次数。</p><p>在统计<code>Bo2b-1</code>时，我们要找到第一次0或1胜利<code>b</code>次以上的位置，将<code>j</code>倒序处理，$2b-1$是最多获得终局的次数，$b$是最少获得终局的次数。假设$b=5$，需要至少$5$局，至多$9$局定胜负，注意到$9=2^3+2^0$，在计数恰好$9$局时，应当只统计先$2^3=8$局，然后往后再统计$2^0=1$局（这里先1后8也不会影响结果，只要保证不超过9局即可）。在计算<code>Bo2b-1</code>的结果时，每次统计恰好$2b-1$。</p><h3 id=代码-4 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-4 class=header-mark></a>代码</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>status</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n0</span><span class=p>,</span> <span class=n>n1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>overpos</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=n>f</span><span class=p>[</span><span class=n>maxn</span><span class=p>][</span><span class=mi>20</span><span class=p>];</span> <span class=c1>// 从位置i开始结束j小局后的状态
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ll</span> <span class=n>n</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>a</span> <span class=o>&gt;&gt;</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span> <span class=n>s</span><span class=p>;</span><span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 更新Bo2a-1的状态
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>w0</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>w1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// 统计0/1胜利多少次
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>pos</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 位置i开始
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>while</span> <span class=p>(</span><span class=n>w0</span> <span class=o>&lt;</span> <span class=n>a</span> <span class=o>&amp;&amp;</span> <span class=n>w1</span> <span class=o>&lt;</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// 未出小局结果
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>pos</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span><span class=p>)</span><span class=n>w1</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=n>w0</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>pos</span> <span class=o>=</span> <span class=p>(</span><span class=n>pos</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>%</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>w0</span> <span class=o>&gt;=</span> <span class=n>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=n>pos</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=n>pos</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;1&#39;</span><span class=p>)</span><span class=n>w1</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=n>w0</span><span class=o>--</span><span class=p>;</span> <span class=c1>// 下一次循环会从i+1开始,减去i位置的分
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 倍增结果
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;</span> <span class=mi>20</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 枚举进行了2^j局
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 枚举开始位置
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// 第i位置开始进行2^j局=第i开始进行2^(j-1)局+第i开始进行2^(j-1)局后的位置pos开始进行2^(j-1)局
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kt>int</span> <span class=n>pos</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>].</span><span class=n>overpos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>overpos</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>pos</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>].</span><span class=n>overpos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>n0</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>].</span><span class=n>n0</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>pos</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>].</span><span class=n>n0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>n1</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>].</span><span class=n>n1</span> <span class=o>+</span> <span class=n>f</span><span class=p>[</span><span class=n>pos</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>].</span><span class=n>n1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 进行Bo2b-1的结果统计
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>w0</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>w1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>tot</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>pos</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;</span> <span class=mi>20</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 从pos开始进行2^j次比赛,累计0/1的胜利次数
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>((</span><span class=mi>2</span> <span class=o>*</span> <span class=n>b</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>&gt;&gt;</span> <span class=n>j</span> <span class=o>&amp;</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>w0</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>pos</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>n0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>w1</span> <span class=o>+=</span> <span class=n>f</span><span class=p>[</span><span class=n>pos</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>n1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>pos</span> <span class=o>=</span> <span class=n>f</span><span class=p>[</span><span class=n>pos</span><span class=p>][</span><span class=n>j</span><span class=p>].</span><span class=n>overpos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// cout &lt;&lt; w0 &lt;&lt; &#34; &#34; &lt;&lt; w1 &lt;&lt; endl; // 出现第一个胜利b次时正确
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=n>w0</span> <span class=o>&gt;=</span> <span class=n>b</span><span class=p>)</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;1&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=l-sudoku-and-minesweeper class=headerLink><a href=#l-sudoku-and-minesweeper class=header-mark></a>L-Sudoku and Minesweeper</h2><h3 id=题意-5 class=headerLink><a href=#%e9%a2%98%e6%84%8f-5 class=header-mark></a>题意</h3><p>给出一个$9\times 9$的数独，在这个数独的基础上构造一个扫雷地图，将数独上的一些数字替换为<code>*</code>，但是不能将所有数字都替换为<code>*</code>，使得整个扫雷地图合法。</p><h3 id=思路-5 class=headerLink><a href=#%e6%80%9d%e8%b7%af-5 class=header-mark></a>思路</h3><p>在铺满地雷的地图上保留一些数字，数字<code>8</code>表明该格周围都是<code>*</code>，所以选择保留所有的<code>8</code>，并再次遍历一遍所有的地图（注意边界），删掉不符合要求的<code>8</code>。</p><p>或者另一个想法：中间$3\times 3$的格子中中一定有一个数字<code>8</code>，在去掉除了这个<code>8</code>以外的所有数字之后，这个<code>8</code>一定是符合要求的。</p><h3 id=代码-5 class=headerLink><a href=#%e4%bb%a3%e7%a0%81-5 class=header-mark></a>代码</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>char</span> <span class=n>mp</span><span class=p>[</span><span class=mi>10</span><span class=p>][</span><span class=mi>10</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>solve</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;8&#39;</span><span class=p>)</span><span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;*&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;&gt;</span><span class=n>dxy</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>},{</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>},{</span><span class=o>-</span><span class=mi>1</span> <span class=p>,</span><span class=mi>1</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>0</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>},{</span><span class=mi>0</span> <span class=p>,</span><span class=mi>1</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=o>-</span><span class=mi>1</span><span class=p>},{</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>},{</span><span class=mi>1</span> <span class=p>,</span><span class=mi>1</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span><span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>-</span> <span class=sc>&#39;0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=n>k</span> <span class=o>&lt;</span> <span class=mi>8</span><span class=p>;</span><span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>ii</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>dxy</span><span class=p>[</span><span class=n>k</span><span class=p>].</span><span class=n>first</span><span class=p>,</span> <span class=n>jj</span> <span class=o>=</span> <span class=n>j</span> <span class=o>+</span> <span class=n>dxy</span><span class=p>[</span><span class=n>k</span><span class=p>].</span><span class=n>second</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>ii</span> <span class=o>&gt;=</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>ii</span> <span class=o>&lt;=</span> <span class=mi>9</span> <span class=o>&amp;&amp;</span> <span class=n>jj</span> <span class=o>&gt;=</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>jj</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=p>(</span><span class=n>mp</span><span class=p>[</span><span class=n>ii</span><span class=p>][</span><span class=n>jj</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;*&#39;</span><span class=p>)</span> <span class=p>{</span> <span class=n>y</span><span class=o>++</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>!=</span> <span class=n>y</span><span class=p>)</span><span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;*&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=n>j</span> <span class=o>&lt;=</span> <span class=mi>9</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>mp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></div><h2>相关内容</h2><div class=related-container><div class=related-item-container><div class=related-image><a href=/posts/nc25wd2/><img loading=lazy src=https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg srcset="https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg, https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg 1.5x, https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg title=https://img.dodolalorc.cn/i/2025/02/06/67a3a57b557f6.jpg height=200 width=400></a></div><h2 class=related-title><a href=/posts/nc25wd2/>2025牛客暑寒假多校训练营Day2</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/nc25wd1/><img loading=lazy src=https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg srcset="https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg, https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg 1.5x, https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg title=https://img.dodolalorc.cn/i/2025/02/05/67a26952e01a0.jpg height=200 width=400></a></div><h2 class=related-title><a href=/posts/nc25wd1/>2025牛客暑寒假多校训练营Day1（完結）</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/cfround990div2/><img loading=lazy src=https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png srcset="https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png, https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png 1.5x, https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png title=https://img.dodolalorc.cn/i/2024/12/10/67580e40e3ea7.png height=200 width=400></a></div><h2 class=related-title><a href=/posts/cfround990div2/>Codeforces Round 990 (Div. 2)</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/cfround980div2/><img loading=lazy src=https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png srcset="https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png, https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png 1.5x, https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png title=https://img.dodolalorc.cn/i/2024/12/10/67580e4ad64c9.png height=200 width=400></a></div><h2 class=related-title><a href=/posts/cfround980div2/>Codeforces Round 980 (Div. 2)</a></h2></div><div class=related-item-container><div class=related-image><a href=/posts/23hangzhouicpc/><img loading=lazy src=https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg srcset="https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg, https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg 1.5x, https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg 2x" sizes=auto alt=https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg title=https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg height=200 width=400></a></div><h2 class=related-title><a href=/posts/23hangzhouicpc/>2023杭州ICPC区域赛</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2025-03-02</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/posts/nc24sd3/index.md target=_blank rel="noopener noreferrer">阅读原始文档</a></span></div><div class=post-info-share><span><a href=# title="分享到 Twitter" data-sharer=twitter data-url=http://dodolalorc.cn/posts/nc24sd3/ data-title=2024牛客暑假多校训练营Day3||补题 data-hashtags=2024暑假集训,算法,牛客><i class="fab fa-twitter fa-fw"></i></a><a href=# title="分享到 Facebook" data-sharer=facebook data-url=http://dodolalorc.cn/posts/nc24sd3/ data-hashtag=2024暑假集训><i class="fab fa-facebook-square fa-fw"></i></a><a href=# title="分享到 Hacker News" data-sharer=hackernews data-url=http://dodolalorc.cn/posts/nc24sd3/ data-title=2024牛客暑假多校训练营Day3||补题><i class="fab fa-hacker-news fa-fw"></i></a><a href=# title="分享到 Line" data-sharer=line data-url=http://dodolalorc.cn/posts/nc24sd3/ data-title=2024牛客暑假多校训练营Day3||补题><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=# title="分享到 微博" data-sharer=weibo data-url=http://dodolalorc.cn/posts/nc24sd3/ data-title=2024牛客暑假多校训练营Day3||补题><i class="fab fa-weibo fa-fw"></i></a><a href=# title="分享到 百度" data-sharer=baidu data-url=http://dodolalorc.cn/posts/nc24sd3/ data-title=2024牛客暑假多校训练营Day3||补题><i data-svg-src=/lib/simple-icons/icons/baidu.min.svg></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/2024%E6%9A%91%E5%81%87%E9%9B%86%E8%AE%AD/>2024暑假集训</a>,&nbsp;<a href=/tags/%E7%AE%97%E6%B3%95/>算法</a>,&nbsp;<a href=/tags/%E7%89%9B%E5%AE%A2/>牛客</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/hdu24sd1/ class=prev rel=prev title=2024杭电钉耙编程联赛Day1||补题><i class="fas fa-angle-left fa-fw"></i>2024杭电钉耙编程联赛Day1||补题</a>
<a href=/posts/nc24sd4/ class=next rel=next title=2024牛客暑假多校训练营Day4||补题>2024牛客暑假多校训练营Day4||补题<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=giscus></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/>giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><span id=run-time></span></div><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.145.0">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.3.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://dodolalorc.cn/ target=_blank rel="noopener noreferrer">DODOLA</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><p class=beian><img class=beian-icon src=/img/icons/govbeian.png><a class=gov href="https://beian.mps.gov.cn/#/query/webSearch?code=33010902003733" rel=noreferrer title=浙公网安备33010902003733 target=_blank>浙公网安备33010902003733</a><a class=icp href=https://beian.miit.gov.cn/#/Integrated/index target=_blank title=浙ICP备2023048052号-1>浙ICP备2023048052号-1</a></p></span></div><div class=footer-line></div><div class=footer-line><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><section><span id=busuanzi_container_value_site_pv><i class="far fa-eye fa-fw"></i>
<span id=busuanzi_value_site_pv></span>
</span>&nbsp;|&nbsp;
<span id=busuanzi_container_value_site_uv><i class="fa fa-user"></i>
<span id=busuanzi_value_site_uv></span></span></section></div></div><script type=text/javascript src=/js/custom.js></script></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{giscus:{darkTheme:"dark",dataCategory:"Announcements",dataCategoryId:"DIC_kwDOLYjsRc4Clp7p",dataEmitMetadata:"0",dataInputPosition:"bottom",dataLang:"en",dataMapping:"pathname",dataReactionsEnabled:"1",dataRepo:"Florae006/Florae006.github.io",dataRepoId:"R_kgDOLYjsRQ",dataStrict:"0",lightTheme:"light"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},sharerjs:!0,table:{sort:!0}}</script><script type=text/javascript src=/js/giscus.min.js defer></script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script></div></body></html>