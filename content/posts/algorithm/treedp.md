+++
title = 'åˆ·é¢˜è®°å½•||æ ‘å½¢åŠ¨æ€è§„åˆ’'
date = 2024-03-09T21:51:07+08:00
draft = true
math = true
tags = [
    'åŠ¨æ€è§„åˆ’','ç®—æ³•'
]
+++

## **ğŸ‘¾æ ‘å½¢åŠ¨æ€è§„åˆ’**

==*æ ‘å½¢åŠ¨æ€è§„åˆ’ï¼Œå³åœ¨æ ‘ä¸Šè¿›è¡Œçš„åŠ¨æ€è§„åˆ’ã€‚*==

==*å› ä¸ºæ ‘çš„é€’å½’æ€§è´¨ï¼Œæ ‘å½¢åŠ¨æ€è§„åˆ’ä¸€èˆ¬éƒ½æ˜¯é€’å½’æ±‚è§£çš„ã€‚*==

### ğŸ«[P1352]æ²¡æœ‰ä¸Šå¸çš„èˆä¼š

> # æ²¡æœ‰ä¸Šå¸çš„èˆä¼š
>
> ## é¢˜ç›®æè¿°
>
> æŸå¤§å­¦æœ‰ $n$ ä¸ªèŒå‘˜ï¼Œç¼–å·ä¸º $1\ldots n$ã€‚
>
> ä»–ä»¬ä¹‹é—´æœ‰ä»å±å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬çš„å…³ç³»å°±åƒä¸€æ£µä»¥æ ¡é•¿ä¸ºæ ¹çš„æ ‘ï¼Œçˆ¶ç»“ç‚¹å°±æ˜¯å­ç»“ç‚¹çš„ç›´æ¥ä¸Šå¸ã€‚
>
> ç°åœ¨æœ‰ä¸ªå‘¨å¹´åº†å®´ä¼šï¼Œå®´ä¼šæ¯é‚€è¯·æ¥ä¸€ä¸ªèŒå‘˜éƒ½ä¼šå¢åŠ ä¸€å®šçš„å¿«ä¹æŒ‡æ•° $r_i$ï¼Œä½†æ˜¯å‘¢ï¼Œå¦‚æœæŸä¸ªèŒå‘˜çš„ç›´æ¥ä¸Šå¸æ¥å‚åŠ èˆä¼šäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªèŒå‘˜å°±æ— è®ºå¦‚ä½•ä¹Ÿä¸è‚¯æ¥å‚åŠ èˆä¼šäº†ã€‚
>
> æ‰€ä»¥ï¼Œè¯·ä½ ç¼–ç¨‹è®¡ç®—ï¼Œé‚€è¯·å“ªäº›èŒå‘˜å¯ä»¥ä½¿å¿«ä¹æŒ‡æ•°æœ€å¤§ï¼Œæ±‚æœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° $n$ã€‚
>
> ç¬¬ $2$ åˆ°ç¬¬ $(n + 1)$ è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œç¬¬ $(i+1)$ è¡Œçš„æ•´æ•°è¡¨ç¤º $i$ å·èŒå‘˜çš„å¿«ä¹æŒ‡æ•° $r_i$ã€‚
>
> ç¬¬ $(n + 2)$ åˆ°ç¬¬ $2n$ è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸€å¯¹æ•´æ•° $l, k$ï¼Œä»£è¡¨ $k$ æ˜¯ $l$ çš„ç›´æ¥ä¸Šå¸ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ä»£è¡¨æœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 7
> 1
> 1
> 1
> 1
> 1
> 1
> 1
> 1 3
> 2 3
> 6 4
> 7 4
> 4 5
> 3 5
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 5
> ```
>
> ## æç¤º
>
> #### æ•°æ®è§„æ¨¡ä¸çº¦å®š
>
> å¯¹äº $100\%$ çš„æ•°æ®ï¼Œä¿è¯ $1\leq n \leq 6 \times 10^3$ï¼Œ$-128 \leq r_i\leq 127$ï¼Œ$1 \leq l, k \leq n$ï¼Œä¸”ç»™å‡ºçš„å…³ç³»ä¸€å®šæ˜¯ä¸€æ£µæ ‘ã€‚

### ğŸ«[P1040]åŠ åˆ†äºŒå‰æ ‘

> # [NOIP2003 æé«˜ç»„] åŠ åˆ†äºŒå‰æ ‘
>
> ## é¢˜ç›®æè¿°
>
> è®¾ä¸€ä¸ª $n$ ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ $\text{tree}$ çš„ä¸­åºéå†ä¸º$(1,2,3,\ldots,n)$ï¼Œå…¶ä¸­æ•°å­— $1,2,3,\ldots,n$ ä¸ºèŠ‚ç‚¹ç¼–å·ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆå‡ä¸ºæ­£æ•´æ•°ï¼‰ï¼Œè®°ç¬¬ $i$ ä¸ªèŠ‚ç‚¹çš„åˆ†æ•°ä¸º $d_i$ï¼Œ$\text{tree}$ åŠå®ƒçš„æ¯ä¸ªå­æ ‘éƒ½æœ‰ä¸€ä¸ªåŠ åˆ†ï¼Œä»»ä¸€æ£µå­æ ‘ $\text{subtree}$ï¼ˆä¹ŸåŒ…å« $\text{tree}$ æœ¬èº«ï¼‰çš„åŠ åˆ†è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š
>
>
> $\text{subtree}$ çš„å·¦å­æ ‘çš„åŠ åˆ† $\times$ $\text{subtree}$ çš„å³å­æ ‘çš„åŠ åˆ† $+$ $\text{subtree}$ çš„æ ¹çš„åˆ†æ•°ã€‚
>
> è‹¥æŸä¸ªå­æ ‘ä¸ºç©ºï¼Œè§„å®šå…¶åŠ åˆ†ä¸º $1$ï¼Œå¶å­çš„åŠ åˆ†å°±æ˜¯å¶èŠ‚ç‚¹æœ¬èº«çš„åˆ†æ•°ã€‚ä¸è€ƒè™‘å®ƒçš„ç©ºå­æ ‘ã€‚
>
> è¯•æ±‚ä¸€æ£µç¬¦åˆä¸­åºéå†ä¸º $(1,2,3,\ldots,n)$ ä¸”åŠ åˆ†æœ€é«˜çš„äºŒå‰æ ‘ $\text{tree}$ã€‚è¦æ±‚è¾“å‡º
>
> 1. $\text{tree}$ çš„æœ€é«˜åŠ åˆ†ã€‚
>
> 2. $\text{tree}$ çš„å‰åºéå†ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ $1$ è¡Œ $1$ ä¸ªæ•´æ•° $n$ï¼Œä¸ºèŠ‚ç‚¹ä¸ªæ•°ã€‚
>
> ç¬¬ $2$ è¡Œ $n$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„åˆ†æ•°
>
> ## è¾“å‡ºæ ¼å¼
>
> ç¬¬ $1$ è¡Œ $1$ ä¸ªæ•´æ•°ï¼Œä¸ºæœ€é«˜åŠ åˆ†ï¼ˆ$ Ans \le 4,000,000,000$ï¼‰ã€‚
>
> ç¬¬ $2$ è¡Œ $n$ ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•°ï¼Œä¸ºè¯¥æ ‘çš„å‰åºéå†ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 5
> 5 7 1 2 10
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 145
> 3 1 2 4 5
> ```
>
> ## æç¤º
>
> ### æ•°æ®è§„æ¨¡ä¸çº¦å®š
>
> å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ $1 \leq n< 30$ï¼ŒèŠ‚ç‚¹çš„åˆ†æ•°æ˜¯å°äº $100$ çš„æ­£æ•´æ•°ï¼Œç­”æ¡ˆä¸è¶…è¿‡ $4 \times 10^9$ã€‚

### ğŸ«[P1122]æœ€å¤§å­æ ‘å’Œ

> # æœ€å¤§å­æ ‘å’Œ
>
> ## é¢˜ç›®æè¿°
>
> å°æ˜å¯¹æ•°å­¦é¥±æœ‰å…´è¶£ï¼Œå¹¶ä¸”æ˜¯ä¸ªå‹¤å¥‹å¥½å­¦çš„å­¦ç”Ÿï¼Œæ€»æ˜¯åœ¨è¯¾åç•™åœ¨æ•™å®¤å‘è€å¸ˆè¯·æ•™ä¸€äº›é—®é¢˜ã€‚ä¸€å¤©ä»–æ—©æ™¨éª‘è½¦å»ä¸Šè¯¾ï¼Œè·¯ä¸Šè§åˆ°ä¸€ä¸ªè€ä¼¯æ­£åœ¨ä¿®å‰ªèŠ±èŠ±è‰è‰ï¼Œé¡¿æ—¶æƒ³åˆ°äº†ä¸€ä¸ªæœ‰å…³ä¿®å‰ªèŠ±å‰çš„é—®é¢˜ã€‚äºæ˜¯å½“æ—¥è¯¾åï¼Œå°æ˜å°±å‘è€å¸ˆæå‡ºäº†è¿™ä¸ªé—®é¢˜ï¼š
>
> ä¸€æ ªå¥‡æ€ªçš„èŠ±å‰ï¼Œä¸Šé¢å…±è¿æœ‰ $N$ æœµèŠ±ï¼Œå…±æœ‰ $N-1$ æ¡æå¹²å°†èŠ±å„¿è¿åœ¨ä¸€èµ·ï¼Œå¹¶ä¸”æœªä¿®å‰ªæ—¶æ¯æœµèŠ±éƒ½ä¸æ˜¯å­¤ç«‹çš„ã€‚æ¯æœµèŠ±éƒ½æœ‰ä¸€ä¸ªâ€œç¾ä¸½æŒ‡æ•°â€ï¼Œè¯¥æ•°è¶Šå¤§è¯´æ˜è¿™æœµèŠ±è¶Šæ¼‚äº®ï¼Œä¹Ÿæœ‰â€œç¾ä¸½æŒ‡æ•°â€ä¸ºè´Ÿæ•°çš„ï¼Œè¯´æ˜è¿™æœµèŠ±çœ‹ç€éƒ½è®©äººæ¶å¿ƒã€‚æ‰€è°“â€œä¿®å‰ªâ€ï¼Œæ„ä¸ºï¼šå»æ‰å…¶ä¸­çš„ä¸€æ¡ææ¡ï¼Œè¿™æ ·ä¸€æ ªèŠ±å°±æˆäº†ä¸¤æ ªï¼Œæ‰”æ‰å…¶ä¸­ä¸€æ ªã€‚ç»è¿‡ä¸€ç³»åˆ—â€œä¿®å‰ªâ€œä¹‹åï¼Œè¿˜å‰©ä¸‹æœ€åä¸€æ ªèŠ±ï¼ˆä¹Ÿå¯èƒ½æ˜¯ä¸€æœµï¼‰ã€‚è€å¸ˆçš„ä»»åŠ¡å°±æ˜¯ï¼šé€šè¿‡ä¸€ç³»åˆ—â€œä¿®å‰ªâ€ï¼ˆä¹Ÿå¯ä»¥ä»€ä¹ˆâ€œä¿®å‰ªâ€éƒ½ä¸è¿›è¡Œï¼‰ï¼Œä½¿å‰©ä¸‹çš„é‚£æ ªï¼ˆé‚£æœµï¼‰èŠ±å‰ä¸Šæ‰€æœ‰èŠ±æœµçš„â€œç¾ä¸½æŒ‡æ•°â€ä¹‹å’Œæœ€å¤§ã€‚
>
> è€å¸ˆæƒ³äº†ä¸€ä¼šå„¿ï¼Œç»™å‡ºäº†æ­£è§£ã€‚å°æ˜è§é—®é¢˜è¢«è½»æ˜“æ”»ç ´ï¼Œç›¸å½“ä¸çˆ½ï¼Œäºæ˜¯åˆæ‹¿æ¥é—®ä½ ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° $n\ (1\le N\le 16000)$ã€‚è¡¨ç¤ºåŸå§‹çš„é‚£æ ªèŠ±å‰ä¸Šå…± $n$ æœµèŠ±ã€‚
>
> ç¬¬äºŒè¡Œæœ‰ $n$ ä¸ªæ•´æ•°ï¼Œç¬¬ $i$ ä¸ªæ•´æ•°è¡¨ç¤ºç¬¬ $i$ æœµèŠ±çš„ç¾ä¸½æŒ‡æ•°ã€‚
>
> æ¥ä¸‹æ¥ $n-1$ è¡Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° $a,b$ï¼Œè¡¨ç¤ºå­˜åœ¨ä¸€æ¡è¿æ¥ç¬¬ $a$ æœµèŠ±å’Œç¬¬ $b$ æœµèŠ±çš„ææ¡ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> ä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºä¸€ç³»åˆ—â€œä¿®å‰ªâ€ä¹‹åæ‰€èƒ½å¾—åˆ°çš„â€œç¾ä¸½æŒ‡æ•°â€ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚ä¿è¯ç»å¯¹å€¼ä¸è¶…è¿‡ $2147483647$ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 7
> -1 -1 -1 1 1 1 0
> 1 4
> 2 5
> 3 6
> 4 7
> 5 7
> 6 7
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 3
> ```
>
> ## æç¤º
>
> ### æ•°æ®èŒƒå›´åŠçº¦å®š
>
> - å¯¹äº $60\%$ çš„æ•°æ®ï¼Œæœ‰ $1\le N\le 1000$ï¼›
> - å¯¹äº $100\%$ çš„æ•°æ®ï¼Œæœ‰ $1\le N\le 16000$ã€‚

### ğŸ«[P1273]æœ‰çº¿ç”µè§†ç½‘

> # æœ‰çº¿ç”µè§†ç½‘
>
> ## é¢˜ç›®æè¿°
>
> æŸæ”¶è´¹æœ‰çº¿ç”µè§†ç½‘è®¡åˆ’è½¬æ’­ä¸€åœºé‡è¦çš„è¶³çƒæ¯”èµ›ã€‚ä»–ä»¬çš„è½¬æ’­ç½‘å’Œç”¨æˆ·ç»ˆç«¯æ„æˆä¸€æ£µæ ‘çŠ¶ç»“æ„ï¼Œè¿™æ£µæ ‘çš„æ ¹ç»“ç‚¹ä½äºè¶³çƒæ¯”èµ›çš„ç°åœºï¼Œæ ‘å¶ä¸ºå„ä¸ªç”¨æˆ·ç»ˆç«¯ï¼Œå…¶ä»–ä¸­è½¬ç«™ä¸ºè¯¥æ ‘çš„å†…éƒ¨èŠ‚ç‚¹ã€‚
>
> ä»è½¬æ’­ç«™åˆ°è½¬æ’­ç«™ä»¥åŠä»è½¬æ’­ç«™åˆ°æ‰€æœ‰ç”¨æˆ·ç»ˆç«¯çš„ä¿¡å·ä¼ è¾“è´¹ç”¨éƒ½æ˜¯å·²çŸ¥çš„ï¼Œä¸€åœºè½¬æ’­çš„æ€»è´¹ç”¨ç­‰äºä¼ è¾“ä¿¡å·çš„è´¹ç”¨æ€»å’Œã€‚
>
> ç°åœ¨æ¯ä¸ªç”¨æˆ·éƒ½å‡†å¤‡äº†ä¸€ç¬”è´¹ç”¨æƒ³è§‚çœ‹è¿™åœºç²¾å½©çš„è¶³çƒæ¯”èµ›ï¼Œæœ‰çº¿ç”µè§†ç½‘æœ‰æƒå†³å®šç»™å“ªäº›ç”¨æˆ·æä¾›ä¿¡å·è€Œä¸ç»™å“ªäº›ç”¨æˆ·æä¾›ä¿¡å·ã€‚
>
> å†™ä¸€ä¸ªç¨‹åºæ‰¾å‡ºä¸€ä¸ªæ–¹æ¡ˆä½¿å¾—æœ‰çº¿ç”µè§†ç½‘åœ¨ä¸äºæœ¬çš„æƒ…å†µä¸‹ä½¿è§‚çœ‹è½¬æ’­çš„ç”¨æˆ·å°½å¯èƒ½å¤šã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•´æ•° $N$ å’Œ $M$ï¼Œå…¶ä¸­ $2 \le N \le 3000$ï¼Œ$1 \le M \le N-1$ï¼Œ$N$ ä¸ºæ•´ä¸ªæœ‰çº¿ç”µè§†ç½‘çš„ç»“ç‚¹æ€»æ•°ï¼Œ$M$ ä¸ºç”¨æˆ·ç»ˆç«¯çš„æ•°é‡ã€‚
>
> ç¬¬ä¸€ä¸ªè½¬æ’­ç«™å³æ ‘çš„æ ¹ç»“ç‚¹ç¼–å·ä¸º $1$ï¼Œå…¶ä»–çš„è½¬æ’­ç«™ç¼–å·ä¸º $2$ åˆ° $N-M$ï¼Œç”¨æˆ·ç»ˆç«¯ç¼–å·ä¸º $N-M+1$ åˆ° $N$ã€‚
>
> æ¥ä¸‹æ¥çš„ $N-M$ è¡Œæ¯è¡Œè¡¨ç¤ºâ€”ä¸ªè½¬æ’­ç«™çš„æ•°æ®ï¼Œç¬¬ $i+1$ è¡Œè¡¨ç¤ºç¬¬ $i$ ä¸ªè½¬æ’­ç«™çš„æ•°æ®ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š
>
> $K \ \ A_1 \ \ C_1 \ \ A_2 \ \ C_2 \ \ \ldots \ \ A_k \ \ C_k$
>
> $K$ è¡¨ç¤ºè¯¥è½¬æ’­ç«™ä¸‹æ¥ $K$ ä¸ªç»“ç‚¹ï¼ˆè½¬æ’­ç«™æˆ–ç”¨æˆ·ï¼‰ï¼Œæ¯ä¸ªç»“ç‚¹å¯¹åº”ä¸€å¯¹æ•´æ•° $A$ ä¸ $C$ ï¼Œ$A$ è¡¨ç¤ºç»“ç‚¹ç¼–å·ï¼Œ$C$ è¡¨ç¤ºä»å½“å‰è½¬æ’­ç«™ä¼ è¾“ä¿¡å·åˆ°ç»“ç‚¹ $A$ çš„è´¹ç”¨ã€‚æœ€åä¸€è¡Œä¾æ¬¡è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ä¸ºè§‚çœ‹æ¯”èµ›è€Œå‡†å¤‡æ”¯ä»˜çš„é’±æ•°ã€‚å•æ¬¡ä¼ è¾“æˆæœ¬å’Œç”¨æˆ·æ„¿æ„äº¤çš„è´¹ç”¨å‡ä¸è¶…è¿‡ 10ã€‚
>
> [](https://paste.ubuntu.com/p/xN9NRmYvpY/)
>
> ## è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºæ–‡ä»¶ä»…ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸Šè¿°é—®é¢˜æ‰€è¦æ±‚çš„æœ€å¤§ç”¨æˆ·æ•°ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 5 3
> 2 2 2 5 3
> 2 3 2 4 3
> 3 4 2
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 2
> ```
>
> ## æç¤º
>
> **æ ·ä¾‹è§£é‡Š**
>
> ![](https://cdn.luogu.com.cn/upload/pic/86.png) 
>
> å¦‚å›¾æ‰€ç¤ºï¼Œå…±æœ‰äº”ä¸ªç»“ç‚¹ã€‚ç»“ç‚¹ â‘  ä¸ºæ ¹ç»“ç‚¹ï¼Œå³ç°åœºç›´æ’­ç«™ï¼Œâ‘¡ ä¸ºä¸€ä¸ªä¸­è½¬ç«™ï¼Œâ‘¢â‘£â‘¤ ä¸ºç”¨æˆ·ç«¯ï¼Œå…± $M$ ä¸ªï¼Œç¼–å·ä» $N-M+1$ åˆ° $N$ï¼Œä»–ä»¬ä¸ºè§‚çœ‹æ¯”èµ›åˆ†åˆ«å‡†å¤‡çš„é’±æ•°ä¸º $3$ã€$4$ã€$2$ã€‚
>
> ä»ç»“ç‚¹ â‘  å¯ä»¥ä¼ é€ä¿¡å·åˆ°ç»“ç‚¹ â‘¡ï¼Œè´¹ç”¨ä¸º $2$ï¼›
>
> ä¹Ÿå¯ä»¥ä¼ é€ä¿¡å·åˆ°ç»“ç‚¹ â‘¤ï¼Œè´¹ç”¨ä¸º $3$ï¼ˆç¬¬äºŒè¡Œæ•°æ®æ‰€ç¤ºï¼‰ï¼›
>
> ä»ç»“ç‚¹ â‘¡ å¯ä»¥ä¼ è¾“ä¿¡å·åˆ°ç»“ç‚¹ â‘¢ï¼Œè´¹ç”¨ä¸º$2$ï¼›
>
> ä¹Ÿå¯ä¼ è¾“ä¿¡å·åˆ°ç»“ç‚¹ â‘£ï¼Œè´¹ç”¨ä¸º $3$ï¼ˆç¬¬ä¸‰è¡Œæ•°æ®æ‰€ç¤ºï¼‰ã€‚
>
> å¦‚æœè¦è®©æ‰€æœ‰ç”¨æˆ·ï¼ˆâ‘¢â‘£â‘¤ï¼‰éƒ½èƒ½çœ‹ä¸Šæ¯”èµ›ï¼Œåˆ™ä¿¡å·ä¼ è¾“çš„æ€»è´¹ç”¨ä¸ºï¼š$2+3+2+3=10$ï¼Œå¤§äºç”¨æˆ·æ„¿æ„æ”¯ä»˜çš„æ€»è´¹ç”¨ $3+4+2=9$ï¼Œæœ‰çº¿ç”µè§†ç½‘å°±äºæœ¬äº†ï¼Œè€Œåªè®© â‘¢â‘£ ä¸¤ä¸ªç”¨æˆ·çœ‹æ¯”èµ›å°±ä¸äºæœ¬äº†ã€‚
>
> [](https://paste.ubuntu.com/p/H9BMGJvFHH/)

### ğŸ«[P2014]é€‰è¯¾

> # [CTSC1997] é€‰è¯¾
>
> ## é¢˜ç›®æè¿°
>
> åœ¨å¤§å­¦é‡Œæ¯ä¸ªå­¦ç”Ÿï¼Œä¸ºäº†è¾¾åˆ°ä¸€å®šçš„å­¦åˆ†ï¼Œå¿…é¡»ä»å¾ˆå¤šè¯¾ç¨‹é‡Œé€‰æ‹©ä¸€äº›è¯¾ç¨‹æ¥å­¦ä¹ ï¼Œåœ¨è¯¾ç¨‹é‡Œæœ‰äº›è¯¾ç¨‹å¿…é¡»åœ¨æŸäº›è¯¾ç¨‹ä¹‹å‰å­¦ä¹ ï¼Œå¦‚é«˜ç­‰æ•°å­¦æ€»æ˜¯åœ¨å…¶å®ƒè¯¾ç¨‹ä¹‹å‰å­¦ä¹ ã€‚ç°åœ¨æœ‰ $N$ é—¨åŠŸè¯¾ï¼Œæ¯é—¨è¯¾æœ‰ä¸ªå­¦åˆ†ï¼Œæ¯é—¨è¯¾æœ‰ä¸€é—¨æˆ–æ²¡æœ‰ç›´æ¥å…ˆä¿®è¯¾ï¼ˆè‹¥è¯¾ç¨‹ a æ˜¯è¯¾ç¨‹ b çš„å…ˆä¿®è¯¾å³åªæœ‰å­¦å®Œäº†è¯¾ç¨‹ aï¼Œæ‰èƒ½å­¦ä¹ è¯¾ç¨‹ bï¼‰ã€‚ä¸€ä¸ªå­¦ç”Ÿè¦ä»è¿™äº›è¯¾ç¨‹é‡Œé€‰æ‹© $M$ é—¨è¯¾ç¨‹å­¦ä¹ ï¼Œé—®ä»–èƒ½è·å¾—çš„æœ€å¤§å­¦åˆ†æ˜¯å¤šå°‘ï¼Ÿ
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªæ•´æ•° $N$ , $M$ ç”¨ç©ºæ ¼éš”å¼€ã€‚( $1 \leq N \leq 300$ , $1 \leq M \leq 300$ )
>
> æ¥ä¸‹æ¥çš„ $N$ è¡Œ,ç¬¬ $I+1$ è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $k_i $å’Œ $s_i$, $k_i$ è¡¨ç¤ºç¬¬Ié—¨è¯¾çš„ç›´æ¥å…ˆä¿®è¯¾ï¼Œ$s_i$ è¡¨ç¤ºç¬¬Ié—¨è¯¾çš„å­¦åˆ†ã€‚è‹¥ $k_i=0$ è¡¨ç¤ºæ²¡æœ‰ç›´æ¥å…ˆä¿®è¯¾ï¼ˆ$1 \leq {k_i} \leq N$ , $1 \leq {s_i} \leq 20$ï¼‰ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> åªæœ‰ä¸€è¡Œï¼Œé€‰ $M$ é—¨è¯¾ç¨‹çš„æœ€å¤§å¾—åˆ†ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 7  4
> 2  2
> 0  1
> 0  4
> 2  1
> 7  1
> 7  6
> 2  2
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 13
> ```

### ğŸ«[P2585]ä¸‰è‰²äºŒå‰æ ‘

> # [ZJOI2006] ä¸‰è‰²äºŒå‰æ ‘
>
> ## é¢˜ç›®æè¿°
>
> ä¸€æ£µäºŒå‰æ ‘å¯ä»¥æŒ‰ç…§å¦‚ä¸‹è§„åˆ™è¡¨ç¤ºæˆä¸€ä¸ªç”± $0$ã€$1$ã€$2$ ç»„æˆçš„å­—ç¬¦åºåˆ—ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œäºŒå‰æ ‘åºåˆ— $S$â€ï¼š
>
> $$S=
> \begin{cases}
> 0& \textè¡¨ç¤ºè¯¥æ ‘æ²¡æœ‰å­èŠ‚ç‚¹\\
> 1S_1& è¡¨ç¤ºè¯¥æ ‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒS_1 ä¸ºå…¶å­æ ‘çš„äºŒå‰æ ‘åºåˆ—\\
> 2S_1S_2& è¡¨ç¤ºè¯¥æ ‘ç”±ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼ŒS_1 å’Œ S_2 åˆ†åˆ«è¡¨ç¤ºå…¶ä¸¤ä¸ªå­æ ‘çš„äºŒå‰æ ‘åºåˆ—
> \end{cases}$$
>
> ä¾‹å¦‚ï¼Œä¸‹å›¾æ‰€è¡¨ç¤ºçš„äºŒå‰æ ‘å¯ä»¥ç”¨äºŒå‰æ ‘åºåˆ— $S=\texttt{21200110}$ æ¥è¡¨ç¤ºã€‚
>
> ![haha.png](https://i.loli.net/2020/04/27/Ijw8ZEWCKH2rtJG.png)
>
> ä½ çš„ä»»åŠ¡æ˜¯è¦å¯¹ä¸€æ£µäºŒå‰æ ‘çš„èŠ‚ç‚¹è¿›è¡ŒæŸ“è‰²ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¢«æŸ“æˆçº¢è‰²ã€ç»¿è‰²æˆ–è“è‰²ã€‚å¹¶ä¸”ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸å…¶å­èŠ‚ç‚¹çš„é¢œè‰²å¿…é¡»ä¸åŒï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­èŠ‚ç‚¹çš„é¢œè‰²ä¹Ÿå¿…é¡»ä¸åŒã€‚ç»™å®šä¸€é¢—äºŒå‰æ ‘çš„äºŒå‰æ ‘åºåˆ—ï¼Œè¯·æ±‚å‡ºè¿™æ£µæ ‘ä¸­**æœ€å¤šå’Œæœ€å°‘**æœ‰å¤šå°‘ä¸ªç‚¹èƒ½å¤Ÿè¢«æŸ“æˆç»¿è‰²ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> è¾“å…¥åªæœ‰ä¸€è¡Œä¸€ä¸ªå­—ç¬¦ä¸² $s$ï¼Œè¡¨ç¤ºäºŒå‰æ ‘åºåˆ—ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºåªæœ‰ä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•°ï¼Œä¾æ¬¡è¡¨ç¤ºæœ€å¤šå’Œæœ€å°‘æœ‰å¤šå°‘ä¸ªç‚¹èƒ½å¤Ÿè¢«æŸ“æˆç»¿è‰²ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 1122002010
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 5 2
> ```
>
> ## æç¤º
>
> #### æ•°æ®è§„æ¨¡ä¸çº¦å®š
>
> å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯ $1 \leq |s| \leq 5 \times 10^5$ï¼Œ$s$ ä¸­åªå«å­—ç¬¦ `0` `1` `2`ã€‚

### ğŸ«[P3047 ]Nearby Cows

> # [USACO12FEB] Nearby Cows G
>
> ## é¢˜ç›®æè¿°
>
> Farmer John has noticed that his cows often move between nearby fields. Taking this into account, he wants to plant enough grass in each of his fields not only for the cows situated initially in that field, but also for cows visiting from nearby fields.
>
> Specifically, FJ's farm consists of N fields (1 <= N <= 100,000), where some pairs of fields are connected with bi-directional trails (N-1 of them in total).  FJ has designed the farm so that between any two fields i and j, there is a unique path made up of trails connecting between i and j. Field i is home to C(i) cows, although cows sometimes move to a different field by crossing up to K trails (1 <= K <= 20).
>
> FJ wants to plant enough grass in each field i to feed the maximum number of cows, M(i), that could possibly end up in that field -- that is, the number of cows that can potentially reach field i by following at most K trails.  Given the structure of FJ's farm and the value of C(i) for each field i, please help FJ compute M(i) for every field i.
>
> ç»™ä½ ä¸€æ£µ $n$ ä¸ªç‚¹çš„æ ‘ï¼Œç‚¹å¸¦æƒï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹æ±‚å‡ºè·ç¦»å®ƒä¸è¶…è¿‡ $k$ çš„æ‰€æœ‰èŠ‚ç‚¹æƒå€¼å’Œ $m_i$ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> \* Line 1: Two space-separated integers, N and K.
>
> \* Lines 2..N: Each line contains two space-separated integers, i and j (1 <= i,j <= N) indicating that fields i and j are directly connected by a trail.
>
> \* Lines N+1..2N: Line N+i contains the integer C(i). (0 <= C(i) <= 1000)
>
> ç¬¬ä¸€è¡Œä¸¤ä¸ªæ­£æ•´æ•° $n,k$ã€‚   
> æ¥ä¸‹æ¥ $n-1$ è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ­£æ•´æ•° $u,v$ï¼Œè¡¨ç¤º $u,v$ ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚  
> æœ€å $n$ è¡Œï¼Œæ¯è¡Œä¸€ä¸ªéè´Ÿæ•´æ•° $c_i$ï¼Œè¡¨ç¤ºç‚¹æƒã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> \* Lines 1..N: Line i should contain the value of M(i). 
>
> è¾“å‡º $n$ è¡Œï¼Œç¬¬ $i$ è¡Œä¸€ä¸ªæ•´æ•°è¡¨ç¤º $m_i$ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 6 2 
> 5 1 
> 3 6 
> 2 4 
> 2 1 
> 3 2 
> 1 
> 2 
> 3 
> 4 
> 5 
> 6
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 15 
> 21 
> 16 
> 10 
> 8 
> 11
> ```
>
> ## æç¤º
>
> There are 6 fields, with trails connecting (5,1), (3,6), (2,4), (2,1), and (3,2).  Field i has C(i) = i cows.
>
>
> Field 1 has M(1) = 15 cows within a distance of 2 trails, etc.
>
> ã€æ•°æ®èŒƒå›´ã€‘  
> å¯¹äº $100\%$ çš„æ•°æ®ï¼š$1 \le n \le 10^5$ï¼Œ$1 \le k \le 20$ï¼Œ$0 \le c_i \le 1000$

### ğŸ«[P3698]å°Qçš„æ£‹ç›˜

> # [CQOI2017] å°Qçš„æ£‹ç›˜
>
> ## é¢˜ç›®æè¿°
>
> å° Q æ­£åœ¨è®¾è®¡ä¸€ç§æ£‹ç±»æ¸¸æˆã€‚
>
> åœ¨å° Q è®¾è®¡çš„æ¸¸æˆä¸­ï¼Œæ£‹å­å¯ä»¥æ”¾åœ¨æ£‹ç›˜ä¸Šçš„æ ¼ç‚¹ä¸­ã€‚æŸäº›æ ¼ç‚¹ä¹‹é—´æœ‰è¿çº¿ï¼Œæ£‹å­åªèƒ½åœ¨æœ‰è¿çº¿çš„æ ¼ç‚¹ä¹‹é—´ç§»åŠ¨ã€‚æ•´ä¸ªæ£‹ç›˜ä¸Šå…±æœ‰ $V$ ä¸ªæ ¼ç‚¹ï¼Œç¼–å·ä¸º $0,1,2,\cdots, V- 1$ï¼Œå®ƒä»¬æ˜¯è¿é€šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ£‹å­ä»ä»»æ„æ ¼ç‚¹å‡ºå‘ï¼Œæ€»èƒ½åˆ°è¾¾æ‰€æœ‰çš„æ ¼ç‚¹ã€‚å° Q åœ¨è®¾è®¡æ£‹ç›˜æ—¶ï¼Œè¿˜ä¿è¯æ£‹å­ä»ä¸€ä¸ªæ ¼ç‚¹ç§»åŠ¨åˆ°å¦å¤–ä»»ä¸€æ ¼ç‚¹çš„è·¯å¾„æ˜¯å”¯ä¸€çš„ã€‚
>
> å° Q ç°åœ¨æƒ³çŸ¥é“ï¼Œå½“æ£‹å­ä»æ ¼ç‚¹ $0$ å‡ºå‘ï¼Œç§»åŠ¨ $N$ æ­¥æœ€å¤šèƒ½ç»è¿‡å¤šå°‘æ ¼ç‚¹ã€‚æ ¼ç‚¹å¯ä»¥é‡å¤ç»è¿‡å¤šæ¬¡ï¼Œä½†ä¸é‡å¤è®¡æ•°ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«2ä¸ªæ­£æ•´æ•° $V, N$ï¼Œå…¶ä¸­ $V$ è¡¨ç¤ºæ ¼ç‚¹æ€»æ•°ï¼Œ$N$ è¡¨ç¤ºç§»åŠ¨æ­¥æ•°ã€‚
>
> æ¥ä¸‹æ¥ $V-1$ è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•° $a_i,b_i$ï¼Œè¡¨ç¤ºç¼–å·ä¸º$a_i,b_i$ çš„ä¸¤ä¸ªæ ¼ç‚¹ä¹‹é—´æœ‰è¿çº¿ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤šç»è¿‡çš„æ ¼ç‚¹æ•°é‡ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 5 2
> 1 0
> 2 1
> 3 2
> 4 3
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 3
> ```
>
> ## æ ·ä¾‹ #2
>
> ### æ ·ä¾‹è¾“å…¥ #2
>
> ```
> 9 5
> 0 1
> 0 2
> 2 6
> 4 2
> 8 1
> 1 3
> 3 7
> 3 5
> ```
>
> ### æ ·ä¾‹è¾“å‡º #2
>
> ```
> 5
> ```
>
> ## æç¤º
>
> ã€è¾“å…¥è¾“å‡ºæ ·ä¾‹ 1 è¯´æ˜ã€‘
>
> ä»æ ¼ç‚¹ $0$ å‡ºå‘ç§»åŠ¨ $2$ æ­¥ã€‚ç»è¿‡ $0, 1, 2$ è¿™ $3$ ä¸ªæ ¼ç‚¹ã€‚
>
> ã€è¾“å…¥è¾“å‡ºæ ·ä¾‹ 2 è¯´æ˜ã€‘
>
> ä¸€ç§å¯è¡Œçš„ç§»åŠ¨è·¯å¾„ä¸º $0 \to 1 \to 3 \to 5 \to 3 \to 7$ï¼Œç»è¿‡ $0, 1, 3, 5, 7$ è¿™ $5$ ä¸ªæ ¼ç‚¹ã€‚
>
> ã€æ•°æ®è§„æ¨¡ä¸çº¦å®šã€‘
>
> å¯¹äº $100\%$ çš„æµ‹è¯•ç‚¹ï¼Œ$1\le N,V â‰¤ 100$ï¼Œ$0 â‰¤a_i,b_i< V$ã€‚

### ğŸ«[P5658]æ‹¬å·æ ‘

> # [CSP-S2019] æ‹¬å·æ ‘
>
> ## é¢˜ç›®èƒŒæ™¯
>
> æœ¬é¢˜ä¸­**åˆæ³•æ‹¬å·ä¸²**çš„å®šä¹‰å¦‚ä¸‹ï¼š
>
> 1.	`()` æ˜¯åˆæ³•æ‹¬å·ä¸²ã€‚
> 2.	å¦‚æœ `A` æ˜¯åˆæ³•æ‹¬å·ä¸²ï¼Œåˆ™ `(A)` æ˜¯åˆæ³•æ‹¬å·ä¸²ã€‚
> 3.	å¦‚æœ `A`ï¼Œ`B` æ˜¯åˆæ³•æ‹¬å·ä¸²ï¼Œåˆ™ `AB` æ˜¯åˆæ³•æ‹¬å·ä¸²ã€‚
>
> æœ¬é¢˜ä¸­**å­ä¸²**ä¸**ä¸åŒçš„å­ä¸²**çš„å®šä¹‰å¦‚ä¸‹ï¼š
>
> 1.	å­—ç¬¦ä¸² `S` çš„å­ä¸²æ˜¯ `S` ä¸­**è¿ç»­**çš„ä»»æ„ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚`S` çš„å­ä¸²å¯ç”¨èµ·å§‹ä½ç½® $l$ ä¸ç»ˆæ­¢ä½ç½® $r$ æ¥è¡¨ç¤ºï¼Œè®°ä¸º $S (l, r)$ï¼ˆ$1 \leq l \leq r \leq |S |$ï¼Œ$|S |$ è¡¨ç¤º S çš„é•¿åº¦ï¼‰ã€‚
> 2.	`S` çš„ä¸¤ä¸ªå­ä¸²è§†ä½œä¸åŒ**å½“ä¸”ä»…å½“**å®ƒä»¬åœ¨ `S` ä¸­çš„ä½ç½®ä¸åŒï¼Œå³ $l$ ä¸åŒæˆ– $r$ ä¸åŒã€‚
>
> ## é¢˜ç›®æè¿°
>
> ä¸€ä¸ªå¤§å°ä¸º $n$ çš„æ ‘åŒ…å« $n$ ä¸ªç»“ç‚¹å’Œ $n - 1$ æ¡è¾¹ï¼Œæ¯æ¡è¾¹è¿æ¥ä¸¤ä¸ªç»“ç‚¹ï¼Œä¸”ä»»æ„ä¸¤ä¸ªç»“ç‚¹é—´**æœ‰ä¸”ä»…æœ‰**ä¸€æ¡ç®€å•è·¯å¾„äº’ç›¸å¯è¾¾ã€‚
>
> å° Q æ˜¯ä¸€ä¸ªå……æ»¡å¥½å¥‡å¿ƒçš„å°æœ‹å‹ï¼Œæœ‰ä¸€å¤©ä»–åœ¨ä¸Šå­¦çš„è·¯ä¸Šç¢°è§äº†ä¸€ä¸ªå¤§å°ä¸º $n$ çš„æ ‘ï¼Œæ ‘ä¸Šç»“ç‚¹ä» $1 \sim n$ ç¼–å·ï¼Œ$1$ å·ç»“ç‚¹ä¸ºæ ‘çš„æ ¹ã€‚é™¤ $1$ å·ç»“ç‚¹å¤–ï¼Œæ¯ä¸ªç»“ç‚¹æœ‰ä¸€ä¸ªçˆ¶äº²ç»“ç‚¹ï¼Œ$u$ï¼ˆ$2 \leq u \leq n$ï¼‰å·ç»“ç‚¹çš„çˆ¶äº²ä¸º $f_u$ï¼ˆ$1 â‰¤ f_u < u$ï¼‰å·ç»“ç‚¹ã€‚
>
> å° Q å‘ç°è¿™ä¸ªæ ‘çš„æ¯ä¸ªç»“ç‚¹ä¸Š**æ°æœ‰**ä¸€ä¸ªæ‹¬å·ï¼Œå¯èƒ½æ˜¯`(` æˆ–`)`ã€‚å° Q å®šä¹‰ $s_i$ ä¸ºï¼šå°†æ ¹ç»“ç‚¹åˆ° $i$ å·ç»“ç‚¹çš„ç®€å•è·¯å¾„ä¸Šçš„æ‹¬å·ï¼ŒæŒ‰ç»“ç‚¹ç»è¿‡é¡ºåºä¾æ¬¡æ’åˆ—ç»„æˆçš„å­—ç¬¦ä¸²ã€‚
>
> æ˜¾ç„¶ $s_i$ æ˜¯ä¸ªæ‹¬å·ä¸²ï¼Œä½†ä¸ä¸€å®šæ˜¯åˆæ³•æ‹¬å·ä¸²ï¼Œå› æ­¤ç°åœ¨å° Q æƒ³å¯¹æ‰€æœ‰çš„ $i$ï¼ˆ$1\leq i\leq n$ï¼‰æ±‚å‡ºï¼Œ$s_i$ ä¸­æœ‰å¤šå°‘ä¸ª**äº’ä¸ç›¸åŒçš„å­ä¸²**æ˜¯**åˆæ³•æ‹¬å·ä¸²**ã€‚
>
> è¿™ä¸ªé—®é¢˜éš¾å€’äº†å° Qï¼Œä»–åªå¥½å‘ä½ æ±‚åŠ©ã€‚è®¾ $s_i$ å…±æœ‰ $k_i$ ä¸ªä¸åŒå­ä¸²æ˜¯åˆæ³•æ‹¬å·ä¸²ï¼Œ ä½ åªéœ€è¦å‘Šè¯‰å° Q æ‰€æœ‰ $i \times k_i$ çš„å¼‚æˆ–å’Œï¼Œå³ï¼š
> $$ (1 \times k_1)\ \text{xor}\ (2 \times k_2)\ \text{xor}\ (3 \times k_3)\ \text{xor}\ \cdots\ \text{xor}\ (n \times k_n) $$
> å…¶ä¸­ $xor$ æ˜¯ä½å¼‚æˆ–è¿ç®—ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° $n$ï¼Œè¡¨ç¤ºæ ‘çš„å¤§å°ã€‚
>
> ç¬¬äºŒè¡Œä¸€ä¸ªé•¿ä¸º $n$ çš„ç”±`(` ä¸`)` ç»„æˆçš„æ‹¬å·ä¸²ï¼Œç¬¬ $i$ ä¸ªæ‹¬å·è¡¨ç¤º $i$ å·ç»“ç‚¹ä¸Šçš„æ‹¬å·ã€‚
>
> ç¬¬ä¸‰è¡ŒåŒ…å« $n âˆ’ 1$ ä¸ªæ•´æ•°ï¼Œç¬¬ $i$ï¼ˆ$1 \leq i \lt n$ï¼‰ä¸ªæ•´æ•°è¡¨ç¤º $i + 1$ å·ç»“ç‚¹çš„çˆ¶äº²ç¼–å· $f_{i+1}$ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> ä»…ä¸€è¡Œä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 5
> (()()
> 1 1 2 2
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 6
> ```
>
> ## æç¤º
>
> ã€æ ·ä¾‹è§£é‡Š1ã€‘
>
> æ ‘çš„å½¢æ€å¦‚ä¸‹å›¾ï¼š
>
> ![](https://cdn.luogu.com.cn/upload/image_hosting/10z2scex.png)
>
> å°†æ ¹åˆ° 1 å·ç»“ç‚¹çš„ç®€å•è·¯å¾„ä¸Šçš„æ‹¬å·ï¼ŒæŒ‰ç»è¿‡é¡ºåºæ’åˆ—æ‰€ç»„æˆçš„å­—ç¬¦ä¸²ä¸º `(`ï¼Œå­ä¸²æ˜¯åˆæ³•æ‹¬å·ä¸²çš„ä¸ªæ•°ä¸º $0$ã€‚
>
> å°†æ ¹åˆ° 2 å·ç»“ç‚¹çš„å­—ç¬¦ä¸²ä¸º `((`ï¼Œå­ä¸²æ˜¯åˆæ³•æ‹¬å·ä¸²çš„ä¸ªæ•°ä¸º $0$ã€‚
>
> å°†æ ¹åˆ° 3 å·ç»“ç‚¹çš„å­—ç¬¦ä¸²ä¸º `()`ï¼Œå­ä¸²æ˜¯åˆæ³•æ‹¬å·ä¸²çš„ä¸ªæ•°ä¸º $1$ã€‚
>
> å°†æ ¹åˆ° 4 å·ç»“ç‚¹çš„å­—ç¬¦ä¸²ä¸º `(((`ï¼Œå­ä¸²æ˜¯åˆæ³•æ‹¬å·ä¸²çš„ä¸ªæ•°ä¸º $0$ã€‚
>
> å°†æ ¹åˆ° 5 å·ç»“ç‚¹çš„å­—ç¬¦ä¸²ä¸º `(()`ï¼Œå­ä¸²æ˜¯åˆæ³•æ‹¬å·ä¸²çš„ä¸ªæ•°ä¸º $1$ã€‚
>
> ã€æ•°æ®èŒƒå›´ã€‘
>
> ![](https://cdn.luogu.com.cn/upload/image_hosting/1k6fabxr.png)

### ğŸ«[P2607]éª‘å£«

> # [ZJOI2008] éª‘å£«
>
> ## é¢˜ç›®æè¿°
>
> Z å›½çš„éª‘å£«å›¢æ˜¯ä¸€ä¸ªå¾ˆæœ‰åŠ¿åŠ›çš„ç»„ç»‡ï¼Œå¸®ä¼šä¸­æ±‡èšäº†æ¥è‡ªå„åœ°çš„ç²¾è‹±ã€‚ä»–ä»¬åŠ«å¯Œæµè´«ï¼Œæƒ©æ¶æ‰¬å–„ï¼Œå—åˆ°ç¤¾ä¼šå„ç•Œçš„èµæ‰¬ã€‚
>
> æœ€è¿‘å‘ç”Ÿäº†ä¸€ä»¶å¯æ€•çš„äº‹æƒ…ï¼Œé‚ªæ¶çš„ Y å›½å‘åŠ¨äº†ä¸€åœºé’ˆå¯¹ Z å›½çš„ä¾µç•¥æˆ˜äº‰ã€‚æˆ˜ç«ç»µå»¶äº”ç™¾é‡Œï¼Œåœ¨å’Œå¹³ç¯å¢ƒä¸­å®‰é€¸äº†æ•°ç™¾å¹´çš„ Z å›½åˆæ€èƒ½æŠµæŒ¡çš„ä½ Y å›½çš„å†›é˜Ÿã€‚äºæ˜¯äººä»¬æŠŠæ‰€æœ‰çš„å¸Œæœ›éƒ½å¯„æ‰˜åœ¨äº†éª‘å£«å›¢çš„èº«ä¸Šï¼Œå°±åƒæœŸå¾…æœ‰ä¸€ä¸ªçœŸé¾™å¤©å­çš„é™ç”Ÿï¼Œå¸¦é¢†æ­£ä¹‰æ‰“è´¥é‚ªæ¶ã€‚
>
> éª‘å£«å›¢æ˜¯è‚¯å®šå…·æœ‰æ‰“è´¥é‚ªæ¶åŠ¿åŠ›çš„èƒ½åŠ›çš„ï¼Œä½†æ˜¯éª‘å£«ä»¬äº’ç›¸ä¹‹é—´å¾€å¾€æœ‰ä¸€äº›çŸ›ç›¾ã€‚æ¯ä¸ªéª‘å£«éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè‡ªå·±æœ€åŒæ¶çš„éª‘å£«ï¼ˆå½“ç„¶ä¸æ˜¯ä»–è‡ªå·±ï¼‰ï¼Œä»–æ˜¯ç»å¯¹ä¸ä¼šä¸è‡ªå·±æœ€åŒæ¶çš„äººä¸€åŒå‡ºå¾çš„ã€‚
>
> æˆ˜ç«ç»µå»¶ï¼Œäººæ°‘ç”Ÿçµæ¶‚ç‚­ï¼Œç»„ç»‡èµ·ä¸€ä¸ªéª‘å£«å†›å›¢åŠ å…¥æˆ˜æ–—åˆ»ä¸å®¹ç¼“ï¼å›½ç‹äº¤ç»™äº†ä½ ä¸€ä¸ªè‰°å·¨çš„ä»»åŠ¡ï¼Œä»æ‰€æœ‰çš„éª‘å£«ä¸­é€‰å‡ºä¸€ä¸ªéª‘å£«å†›å›¢ï¼Œä½¿å¾—å†›å›¢å†…æ²¡æœ‰çŸ›ç›¾çš„ä¸¤äººï¼ˆä¸å­˜åœ¨ä¸€ä¸ªéª‘å£«ä¸ä»–æœ€ç—›æ¨çš„äººä¸€åŒè¢«é€‰å…¥éª‘å£«å†›å›¢çš„æƒ…å†µï¼‰ï¼Œå¹¶ä¸”ï¼Œä½¿å¾—è¿™æ”¯éª‘å£«å†›å›¢æœ€å…·æœ‰æˆ˜æ–—åŠ›ã€‚
>
> ä¸ºäº†æè¿°æˆ˜æ–—åŠ›ï¼Œæˆ‘ä»¬å°†éª‘å£«æŒ‰ç…§ $1$ è‡³ $n$ ç¼–å·ï¼Œç»™æ¯åéª‘å£«ä¸€ä¸ªæˆ˜æ–—åŠ›çš„ä¼°è®¡ï¼Œä¸€ä¸ªå†›å›¢çš„æˆ˜æ–—åŠ›ä¸ºæ‰€æœ‰éª‘å£«çš„æˆ˜æ–—åŠ›æ€»å’Œã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $n$ï¼Œæè¿°éª‘å£«å›¢çš„äººæ•°ã€‚
>
> æ¥ä¸‹æ¥ $n$ è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒæŒ‰é¡ºåºæè¿°æ¯ä¸€åéª‘å£«çš„æˆ˜æ–—åŠ›å’Œä»–æœ€ç—›æ¨çš„éª‘å£«ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> åº”è¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä½ æ‰€é€‰å‡ºçš„éª‘å£«å†›å›¢çš„æˆ˜æ–—åŠ›ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 3
> 10 2
> 20 3
> 30 1
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 30
> ```
>
> ## æç¤º
>
> #### æ•°æ®è§„æ¨¡ä¸çº¦å®š
>
> å¯¹äº $30\%$ çš„æµ‹è¯•æ•°æ®ï¼Œæ»¡è¶³ $n \le 10$ï¼›
>
> å¯¹äº $60\%$ çš„æµ‹è¯•æ•°æ®ï¼Œæ»¡è¶³ $n \le 100$ï¼›
>
> å¯¹äº $80\%$ çš„æµ‹è¯•æ•°æ®ï¼Œæ»¡è¶³ $n \le 10 ^4$ã€‚
>
> å¯¹äº $100\%$ çš„æµ‹è¯•æ•°æ®ï¼Œæ»¡è¶³ $1\le n \le 10^6$ï¼Œæ¯åéª‘å£«çš„æˆ˜æ–—åŠ›éƒ½æ˜¯ä¸å¤§äº $10^6$ çš„æ­£æ•´æ•°ã€‚

### ğŸ«[P3177]æ ‘ä¸ŠæŸ“è‰²

> # [HAOI2015] æ ‘ä¸ŠæŸ“è‰²
>
> ## é¢˜ç›®æè¿°
>
> æœ‰ä¸€æ£µç‚¹æ•°ä¸º $n$ çš„æ ‘ï¼Œæ ‘è¾¹æœ‰è¾¹æƒã€‚ç»™ä½ ä¸€ä¸ªåœ¨ $0 \sim n$ ä¹‹å†…çš„æ­£æ•´æ•° $k$ ï¼Œä½ è¦åœ¨è¿™æ£µæ ‘ä¸­é€‰æ‹© $k$ ä¸ªç‚¹ï¼Œå°†å…¶æŸ“æˆé»‘è‰²ï¼Œå¹¶å°†å…¶ä»–çš„ $n-k$ ä¸ªç‚¹æŸ“æˆç™½è‰²ã€‚å°†æ‰€æœ‰ç‚¹æŸ“è‰²åï¼Œä½ ä¼šè·å¾—é»‘ç‚¹ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»åŠ ä¸Šç™½ç‚¹ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»çš„å’Œçš„æ”¶ç›Šã€‚é—®æ”¶ç›Šæœ€å¤§å€¼æ˜¯å¤šå°‘ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $n,k$ã€‚
>
> ç¬¬äºŒåˆ° $n$ è¡Œæ¯è¡Œä¸‰ä¸ªæ­£æ•´æ•° $u, v, w$ï¼Œè¡¨ç¤ºè¯¥æ ‘ä¸­å­˜åœ¨ä¸€æ¡é•¿åº¦ä¸º $w$ çš„è¾¹ $(u, v)$ã€‚è¾“å…¥ä¿è¯æ‰€æœ‰ç‚¹ä¹‹é—´æ˜¯è”é€šçš„ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ”¶ç›Šçš„æœ€å¤§å€¼ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 3 1
> 1 2 1
> 1 3 2
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 3
> ```
>
> ## æç¤º
>
> å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$0 \leq n,k \leq 2000$ã€‚

### ğŸ«[P4395]Gem

> # [BOI2003] Gem æ°”å«è½¦
>
> ## é¢˜ç›®æè¿°
>
> ç»™å‡ºä¸€æ£µæ ‘ï¼Œè¦æ±‚ä½ ä¸ºæ ‘ä¸Šçš„ç»“ç‚¹æ ‡ä¸Šæƒå€¼ï¼Œæƒå€¼å¯ä»¥æ˜¯ä»»æ„çš„æ­£æ•´æ•° 
>
> å”¯ä¸€çš„é™åˆ¶æ¡ä»¶æ˜¯ç›¸ä¸´çš„ä¸¤ä¸ªç»“ç‚¹ä¸èƒ½æ ‡ä¸Šç›¸åŒçš„æƒå€¼ï¼Œè¦æ±‚ä¸€ç§æ–¹æ¡ˆï¼Œä½¿å¾—æ•´æ£µæ ‘çš„æ€»ä»·å€¼æœ€å°ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> å…ˆç»™å‡ºä¸€ä¸ªæ•°å­—N,ä»£è¡¨æ ‘ä¸Šæœ‰Nä¸ªç‚¹,N<=10000 
>
> ä¸‹é¢N-1è¡Œ,ä»£è¡¨ä¸¤ä¸ªç‚¹ç›¸è¿
>
> ## è¾“å‡ºæ ¼å¼
>
> æœ€å°çš„æ€»æƒå€¼
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 10 
> 7 5 
> 1 2 
> 1 7 
> 8 9 
> 4 1 
> 9 7 
> 5 6 
> 10 2 
> 9 3
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 14
> ```
>
> ## æç¤º
>
> æœ¬é¢˜å·²ç»æ·»åŠ æ•°æ®ï¼Œä½†è€ƒè™‘åˆ°é¢˜ç›®å¹´ä»£è¾ƒä¸ºä¹…è¿œï¼ˆæ¯•ç«Ÿæ˜¯2003å¹´çš„BOIäº†ï¼‰ä»¥åŠæ´›è°·ç¥é€Ÿè¯„æµ‹å§¬ï¼Œå°†æ­¤é¢˜æ—¶é™ä¿®æ”¹ä¸º500msã€‚

### ğŸ«[P4516]æ½œå…¥è¡ŒåŠ¨

> # [JSOI2018] æ½œå…¥è¡ŒåŠ¨
>
> ## é¢˜ç›®æè¿°
>
> å¤–æ˜ŸäººåˆåŒå’å•è¦æ”»æ‰“åœ°çƒäº†ï¼Œå¤–æ˜Ÿæ¯èˆ°å·²ç»å‘åœ°çƒèˆªè¡Œï¼è¿™ä¸€æ¬¡ï¼Œ``JYY`` å·²ç»è”ç³»å¥½äº†é»„é‡‘èˆ°é˜Ÿï¼Œæ‰“ç®—è”åˆæ‰€æœ‰ ``JSOIer`` æŠµå¾¡å¤–æ˜Ÿäººçš„è¿›æ”»ã€‚
>
> åœ¨é»„é‡‘èˆ°é˜Ÿå°±ä½ä¹‹å‰ï¼Œ``JYY`` æ‰“ç®—äº‹å…ˆäº†è§£å¤–æ˜Ÿäººçš„è¿›æ”»è®¡åˆ’ã€‚ç°åœ¨ï¼Œæºå¸¦äº†ç›‘å¬è®¾å¤‡çš„ç‰¹å·¥å·²ç»ç§˜å¯†æ½œå…¥äº†å¤–æ˜Ÿäººçš„æ¯èˆ°ï¼Œå‡†å¤‡å¯¹å¤–æ˜Ÿäººçš„é€šä¿¡å®æ–½ç›‘å¬ã€‚
>
> å¤–æ˜Ÿäººçš„æ¯èˆ°å¯ä»¥çœ‹æˆæ˜¯ä¸€æ£µ $n$ ä¸ªèŠ‚ç‚¹ã€ $n-1$ æ¡è¾¹çš„**æ— å‘æ ‘**ï¼Œæ ‘ä¸Šçš„èŠ‚ç‚¹ç”¨ $1,2,\cdots,n$ ç¼–å·ã€‚``JYY`` çš„ç‰¹å·¥å·²ç»è£…å¤‡äº†éšå½¢æ¨¡å—ï¼Œå¯ä»¥åœ¨å¤–æ˜Ÿäººæ¯èˆ°ä¸­ä¸å—é™åˆ¶åœ°æ´»åŠ¨ï¼Œå¯ä»¥ç¥ä¸çŸ¥é¬¼ä¸è§‰åœ°åœ¨èŠ‚ç‚¹ä¸Šå®‰è£…ç›‘å¬è®¾å¤‡ã€‚
>
> å¦‚æœåœ¨èŠ‚ç‚¹ $u$ ä¸Šå®‰è£…ç›‘å¬è®¾å¤‡ï¼Œåˆ™ ``JYY`` èƒ½å¤Ÿç›‘å¬ä¸ $u$ **ç›´æ¥ç›¸é‚»**æ‰€æœ‰çš„èŠ‚ç‚¹çš„é€šä¿¡ã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœåœ¨èŠ‚ç‚¹ $u$ å®‰è£…ç›‘å¬è®¾å¤‡ï¼Œåˆ™å¯¹äºæ ‘ä¸­æ¯ä¸€æ¡è¾¹ $(u,v)$ ï¼ŒèŠ‚ç‚¹ $v$ éƒ½ä¼šè¢«ç›‘å¬ã€‚ç‰¹åˆ«æ³¨æ„**æ”¾ç½®åœ¨èŠ‚ç‚¹ $u$ çš„ç›‘å¬è®¾å¤‡å¹¶ä¸ç›‘å¬ $u$ æœ¬èº«çš„é€šä¿¡**ï¼Œè¿™æ˜¯ ``JYY`` ç‰¹åˆ«ä¸ºäº†é˜²æ­¢å¤–æ˜Ÿäººå¯Ÿè§‰éƒ¨ç½²çš„æˆ˜æœ¯ã€‚
>
> ``JYY`` çš„ç‰¹å·¥ä¸€å…±æºå¸¦äº† $k$ ä¸ªç›‘å¬è®¾å¤‡ï¼Œç°åœ¨ ``JYY`` æƒ³çŸ¥é“ï¼Œæœ‰å¤šå°‘ç§ä¸åŒçš„æ”¾ç½®ç›‘å¬è®¾å¤‡çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿä½¿å¾—æ¯èˆ°ä¸Š**æ‰€æœ‰èŠ‚ç‚¹**çš„é€šä¿¡éƒ½è¢«ç›‘å¬ï¼Ÿä¸ºäº†é¿å…æµªè´¹ï¼Œ**æ¯ä¸ªèŠ‚ç‚¹è‡³å¤šåªèƒ½å®‰è£…ä¸€ä¸ªç›‘å¬è®¾å¤‡ï¼Œä¸”ç›‘å¬è®¾å¤‡å¿…é¡»è¢«ç”¨å®Œ**ã€‚
>
> ## è¾“å…¥æ ¼å¼
>
> è¾“å…¥ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° $n,k$ ï¼Œè¡¨ç¤ºæ¯èˆ°èŠ‚ç‚¹çš„æ•°é‡ $n$ å’Œç›‘å¬è®¾å¤‡çš„æ•°é‡ $k$ ã€‚
> æ¥ä¸‹æ¥ $n-1$ è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° $u,v$ $(1\le u,v\le n)$ï¼Œè¡¨ç¤ºæ ‘ä¸­çš„ä¸€æ¡è¾¹ã€‚
>
> ## è¾“å‡ºæ ¼å¼
>
> è¾“å‡ºä¸€è¡Œï¼Œè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„æ–¹æ¡ˆæ•°ã€‚å› ä¸ºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œä½ åªéœ€è¦è¾“å‡ºç­”æ¡ˆ $\text{mod 1,000,000,007}$ çš„ä½™æ•°å³å¯ã€‚
>
> ## æ ·ä¾‹ #1
>
> ### æ ·ä¾‹è¾“å…¥ #1
>
> ```
> 5 3
> 1 2
> 2 3
> 3 4
> 4 5
> ```
>
> ### æ ·ä¾‹è¾“å‡º #1
>
> ```
> 1
> ```
>
> ## æç¤º
>
> **æ ·ä¾‹ 1 è§£é‡Š**
>
> æ ·ä¾‹æ•°æ®æ˜¯ä¸€æ¡é“¾ $1-2-3-4-5$ ã€‚é¦–å…ˆï¼ŒèŠ‚ç‚¹ $2$ å’Œ $4$ å¿…é¡»æ”¾ç½®ç›‘å¬è®¾å¤‡ï¼Œå¦åˆ™ $1,5$ å°†æ— æ³•è¢«ç›‘å¬ï¼ˆæ”¾ç½®çš„ç›‘å¬è®¾å¤‡æ— æ³•ç›‘å¬å®ƒæ‰€åœ¨çš„èŠ‚ç‚¹ï¼‰ã€‚å‰©ä¸‹ä¸€ä¸ªè®¾å¤‡å¿…é¡»æ”¾ç½®åœ¨ $3$ å·èŠ‚ç‚¹ä»¥åŒæ—¶ç›‘å¬ $2,4$ ã€‚å› æ­¤åœ¨ $2,3,4$ èŠ‚ç‚¹æ”¾ç½®ç›‘å¬è®¾å¤‡æ˜¯å”¯ä¸€åˆæ³•çš„æ–¹æ¡ˆã€‚
>
> **æ•°æ®èŒƒå›´**
>
> å­˜åœ¨ $10\%$ çš„æ•°æ®ï¼Œ$1 \le n \le 20$ ï¼›
>
> å­˜åœ¨å¦å¤– $10\%$ çš„æ•°æ®ï¼Œ$1 \le n \le 100$ ï¼›
>
> å­˜åœ¨å¦å¤– $10\%$ çš„æ•°æ®ï¼Œ$1 \le k \le 10$ ï¼›
>
> å­˜åœ¨å¦å¤– $10\%$ çš„æ•°æ®ï¼Œè¾“å…¥çš„æ ‘ä¿è¯æ˜¯ä¸€æ¡é“¾ï¼›
>
> å¯¹äºæ‰€æœ‰æ•°æ®ï¼Œ$1\le n\le 10^5$ ï¼Œ$1\le k\le \min\{n,100\}$ ã€‚
